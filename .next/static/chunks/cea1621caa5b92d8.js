(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48268,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),s=e.i(71645),r=e.i(68513),a=e.i(22016);function l(){let[e,l]=(0,s.useState)([]),[i,n]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),{isAdmin:o}=(0,r.useRole)();(0,s.useEffect)(()=>{x()},[]);let x=async()=>{try{n(!0);let e=await fetch("/api/users");if(!e.ok)throw Error("Failed to fetch users");let t=await e.json();l(t.users||[])}catch(e){console.error("Error fetching users:",e),d("Failed to load users")}finally{n(!1)}},m=async(e,t)=>{try{if(!(await fetch("/api/users/".concat(e,"/role"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:t})})).ok)throw Error("Failed to update user role");l(s=>s.map(s=>s.id===e?{...s,role:t}:s))}catch(e){console.error("Error updating user role:",e),alert("Failed to update user role")}};return o?i?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading users..."})]})}):c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:c}),(0,t.jsx)("button",{onClick:x,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Again"})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage users and their roles in the system"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[e.length," total users"]})})]})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"All Users"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var s;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[e.imageUrl?(0,t.jsx)("img",{className:"h-10 w-10 rounded-full",src:e.imageUrl,alt:e.name||"User"}):(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:(null==(s=e.name)?void 0:s.charAt(0))||e.email.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name||"Anonymous"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("select",{value:e.role,onChange:t=>m(e.id,t.target.value),className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"ADMIN":return"bg-red-100 text-red-800";case"EDITOR":return"bg-blue-100 text-blue-800";case"AUTHOR":return"bg-green-100 text-green-800";case"MODERATOR":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(e.role)," border-0 focus:ring-2 focus:ring-blue-500"),children:[(0,t.jsx)("option",{value:"USER",children:"User"}),(0,t.jsx)("option",{value:"AUTHOR",children:"Author"}),(0,t.jsx)("option",{value:"EDITOR",children:"Editor"}),(0,t.jsx)("option",{value:"MODERATOR",children:"Moderator"}),(0,t.jsx)("option",{value:"ADMIN",children:"Administrator"})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.updatedAt).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(a.default,{href:"/admin/users/".concat(e.id),className:"text-blue-600 hover:text-blue-900",children:"View"}),(0,t.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete ".concat(e.name||e.email,"?"))&&console.log("Delete user:",e.id)},className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id)})})]})})]})})]}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page."}),(0,t.jsx)(a.default,{href:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go Home"})]})})}}]);