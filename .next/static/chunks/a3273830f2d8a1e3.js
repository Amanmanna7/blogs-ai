(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14504,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),s=e.i(71645),r=e.i(22016),a=e.i(68513);function l(){let[e,l]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0),[o,d]=(0,s.useState)(""),[c,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)(null),{isAdmin:h,isEditor:f,isAuthor:p}=(0,a.useRole)(),[g,b]=(0,s.useState)({feature:"",description:"",featureSlug:"",status:"ACTIVE"}),j=async()=>{try{let e=await fetch("/api/plans");if(!e.ok)throw Error("Failed to fetch plans");let t=await e.json();l(t.plans)}catch(e){console.error("Error fetching plans:",e),d("Failed to load plans")}finally{i(!1)}},y=async(t,s)=>{if(confirm('Are you sure you want to delete the plan "'.concat(s,'"?')))try{let s=await fetch("/api/plans/".concat(t),{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete plan")}l(e.filter(e=>e.id!==t))}catch(e){console.error("Error deleting plan:",e),alert(e instanceof Error?e.message:"Failed to delete plan")}},v=async e=>{if(e.preventDefault(),u)try{let e=await fetch("/api/plan-features",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,planId:u})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create plan feature")}m(!1),x(null),b({feature:"",description:"",featureSlug:"",status:"ACTIVE"}),j()}catch(e){console.error("Error creating plan feature:",e),alert(e instanceof Error?e.message:"Failed to create plan feature")}},N=async(e,t)=>{if(confirm('Are you sure you want to delete the feature "'.concat(t,'"?')))try{let t=await fetch("/api/plan-features/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete plan feature")}j()}catch(e){console.error("Error deleting plan feature:",e),alert(e instanceof Error?e.message:"Failed to delete plan feature")}};return((0,s.useEffect)(()=>{j()},[]),h||f||p)?n?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading plans..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Plans & Features"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage subscription plans and their features"})]}),(0,t.jsxs)(r.default,{href:"/admin/plans/create",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Plan"]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:o}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No plans"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new plan."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)(r.default,{href:"/admin/plans/create",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Plan"]})})]}):(0,t.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center mt-2 space-x-4",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["â‚¹",e.price_per_month,"/month"]}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.default,{href:"/admin/plans/".concat(e.id,"/edit"),className:"text-indigo-600 hover:text-indigo-900 text-sm font-medium",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>y(e.id,e.name),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Delete"})]})]})}),(0,t.jsxs)("div",{className:"px-6 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Features"}),(0,t.jsxs)("button",{onClick:()=>{x(e.id),m(!0)},className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-blue-600 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,t.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Feature"]})]}),0===e.features.length?(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No features added yet."}):(0,t.jsx)("div",{className:"space-y-2",children:e.features.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-900",children:e.feature}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium mt-1 ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"INACTIVE"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,t.jsx)("button",{onClick:()=>N(e.id,e.feature),className:"text-red-600 hover:text-red-900 text-xs font-medium ml-2",children:"Remove"})]},e.id))})]})]},e.id))})]}),c&&(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,t.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Feature"}),(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Feature Name"}),(0,t.jsx)("input",{type:"text",value:g.feature,onChange:e=>{let t=e.target.value;b({...g,feature:t,featureSlug:t.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()})},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,t.jsx)("textarea",{value:g.description,onChange:e=>b({...g,description:e.target.value}),rows:3,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Feature Slug"}),(0,t.jsx)("input",{type:"text",value:g.featureSlug,onChange:e=>b({...g,featureSlug:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,t.jsxs)("select",{value:g.status,onChange:e=>b({...g,status:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,t.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,t.jsx)("option",{value:"ARCHIVED",children:"Archived"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{m(!1),x(null),b({feature:"",description:"",featureSlug:"",status:"ACTIVE"})},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Add Feature"})]})]})]})})})]}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page."}),(0,t.jsx)(r.default,{href:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go Home"})]})})}}]);