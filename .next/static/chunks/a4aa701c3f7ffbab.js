(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37628,e=>{"use strict";e.s(["default",()=>m],37628);var s=e.i(43476),t=e.i(71645),r=e.i(18566),l=e.i(20500),a=e.i(22016),n=e.i(63687),o=e.i(80204);function i(e){let{code:r,language:l="text"}=e,[a,n]=(0,t.useState)(!1),o=async()=>{try{await navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),2e3)}catch(e){console.error("Failed to copy text: ",e)}};return(0,s.jsxs)("div",{className:"relative group my-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-800 px-4 py-2 rounded-t-lg",children:[(0,s.jsx)("span",{className:"text-xs text-gray-300 uppercase font-medium",children:l}),(0,s.jsx)("button",{onClick:o,className:"cursor-pointer flex items-center gap-1 text-xs text-gray-300 hover:text-white transition-colors",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})})]}),(0,s.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-b-lg overflow-x-auto text-sm font-mono leading-relaxed",children:(0,s.jsx)("code",{children:r})})]})}function c(e){let{prompt:r="You are a helpful AI assistant. Please provide clear, accurate, and helpful responses to user questions.",placeholder:l="Ask me anything...",className:a="",blogTitle:n="this content",isChatOpen:c=!1,onChatToggle:d,blogId:x,courseId:h,chapterTopicId:m}=e,{isSignedIn:u}=(0,o.useUser)(),[g,p]=(0,t.useState)([]),[f,j]=(0,t.useState)(""),[v,b]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!0),[y,k]=(0,t.useState)(!1),[L,C]=(0,t.useState)(null),[M,S]=(0,t.useState)(!0),[I,B]=(0,t.useState)(!1),[A,z]=(0,t.useState)(!0),[T,W]=(0,t.useState)(!1),[P,E]=(0,t.useState)(!1),[U,D]=(0,t.useState)(!1),[H,V]=(0,t.useState)(null),[R,F]=(0,t.useState)(null),[O,Q]=(0,t.useState)(null),[q,Y]=(0,t.useState)(null),[G,_]=(0,t.useState)(!1),J=(0,t.useRef)(null),K=(0,t.useRef)(null),$=(0,t.useRef)(null),X=(0,t.useRef)(null);(0,t.useEffect)(()=>{u&&c&&(et(),ee())},[u,c,x,h,m]),(0,t.useEffect)(()=>{u&&c&&0===g.length&&!I&&p([{id:"welcome",role:"assistant",content:"ðŸ‘‹ Hello! I'm your AI learning assistant. I'm here to help you understand \"".concat(n,'" better. Feel free to ask me any questions about the concepts, explanations, or if you need clarification on any topic covered in this lesson. How can I assist you today?'),timestamp:new Date}])},[u,c,n,g.length,I]),(0,t.useEffect)(()=>{if(c&&X.current){let e=setTimeout(()=>{var e;null==(e=X.current)||e.focus()},200);return()=>clearTimeout(e)}},[c]);let Z=()=>{$.current&&$.current.scrollTo({top:$.current.scrollHeight,behavior:"smooth"})},ee=async()=>{if(u)try{let e=await fetch("/api/user-plans/check-limits?feature=ai-chat");if(e.ok){let s=await e.json();Y(s.hasActivePlan),F(s.messageLimit),Q(s.remainingMessages),_(0===s.remainingMessages&&!s.hasActivePlan)}}catch(e){console.error("Error checking message limits:",e)}};(0,t.useEffect)(()=>{if(!I&&g.length>0){let e=g[g.length-1];!P&&("user"===e.role?setTimeout(()=>Z(),50):"assistant"===e.role&&e.id!==H&&U&&(setTimeout(()=>(()=>{if($.current){let e=$.current,s=e.querySelectorAll('[data-role="assistant"]');if(s.length>0){let t=s[s.length-1].offsetTop-e.offsetTop;e.scrollTo({top:t,behavior:"smooth"})}}})(),100),V(e.id)))}},[g,I,P,H,U]);let es=async e=>{if(e&&e.preventDefault(),!f.trim()||v||G)return;let s={id:Date.now().toString(),role:"user",content:f.trim(),timestamp:new Date};p(e=>[...e,s]),j(""),X.current&&(X.current.style.height="48px"),b(!0);try{let e=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...g,s].map(e=>({role:e.role,content:e.content})),systemPrompt:r,sessionId:L,blogId:x,courseId:h,chapterTopicId:m,isFirstMessage:M,featureSlug:"ai-chat"})});if(!e.ok){let s=await e.json();if("MESSAGE_LIMIT_EXCEEDED"===s.error){_(!0),Q(0);let e={id:(Date.now()+1).toString(),role:"assistant",content:"You have reached your message limit. Please upgrade to continue chatting.",timestamp:new Date};p(s=>[...s,e]);return}throw Error("Failed to get AI response")}let t=await e.json();M&&t.sessionId&&(C(t.sessionId),S(!1));let l={id:(Date.now()+1).toString(),role:"assistant",content:t.response,timestamp:new Date};p(e=>[...e,l]),null!==O&&O>0&&Q(e=>null!==e?e-1:null)}catch(s){console.error("Error getting AI response:",s);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};p(s=>[...s,e])}finally{b(!1)}},et=async()=>{if(u&&c&&!I){B(!0);try{let e=new URLSearchParams;x&&e.append("blogId",x),h&&e.append("courseId",h),m&&e.append("chapterTopicId",m);let s=await fetch("/api/chat-sessions?".concat(e));if(s.ok){let e=await s.json();if(e.success&&e.sessions&&e.sessions.length>0){let s=e.sessions[0];C(s.id),S(!1);let t=s.messages.map(e=>({id:e.id,role:"USER"===e.sender?"user":"assistant",content:e.message,timestamp:new Date(e.createdAt)}));if(p(t),D(!0),t.length>0){let e=t[t.length-1];"assistant"===e.role&&V(e.id)}setTimeout(()=>Z(),50)}}}catch(e){console.error("Error loading chat history:",e)}finally{B(!1)}}},er=async()=>{if(L&&!T&&A){W(!0);try{let e=new URLSearchParams({sessionId:L,limit:"20",offset:g.length.toString()}),s=await fetch("/api/chat-history?".concat(e));if(s.ok){let e=await s.json();if(e.success&&e.messages.length>0){let s=e.messages.map(e=>({id:e.id,role:"USER"===e.sender?"user":"assistant",content:e.message,timestamp:new Date(e.createdAt)}));p(e=>[...s,...e]),z(e.hasMore)}else z(!1)}}catch(e){console.error("Error loading older messages:",e)}finally{W(!1)}}};return u?c?(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl shadow-xl border-2 border-blue-200 flex flex-col ".concat(a),style:{height:"85vh"},children:[(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"AI Learning Assistant"})]}),(0,s.jsx)("button",{onClick:()=>{null==d||d(!1)},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100 cursor-pointer",title:"Close chat",children:(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-3",children:n}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:g.length>0?"".concat(g.length," message").concat(1!==g.length?"s":""):"Ready to help with your learning"}),null!==R&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:null!==O?q?(0,s.jsx)("span",{className:"text-green-600",children:-1===R?"Unlimited messages":"".concat(O," of ").concat(R," messages remaining")}):O>0?(0,s.jsxs)("span",{className:"text-blue-600",children:[O," of ",R," messages remaining"]}):(0,s.jsx)("span",{className:"text-red-600",children:"Message limit reached"}):(0,s.jsx)("span",{className:"text-gray-500",children:"Loading limits..."})})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-400 animate-pulse"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Active"})]})})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 flex flex-col flex-1 min-h-0",children:[(0,s.jsxs)("div",{ref:$,className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 scroll-smooth",onScroll:e=>{let{scrollTop:s,scrollHeight:t,clientHeight:r}=e.currentTarget;E(!(s+r>=t-10)),0===s&&A&&!T&&er()},children:[T&&(0,s.jsx)("div",{className:"flex justify-center py-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsx)("div",{className:"h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),"Loading older messages..."]})}),I&&(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsx)("div",{className:"h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),"Loading chat history..."]})}),!A&&g.length>0&&(0,s.jsx)("div",{className:"flex justify-center py-2",children:(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"No more messages"})}),0!==g.length||I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:K}),g.map(e=>(0,s.jsx)("div",{"data-role":e.role,className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat("user"===e.role?"bg-blue-600 text-white ml-8":"bg-gray-100 text-gray-900 mr-8"),children:[(0,s.jsx)("div",{className:"text-sm prose prose-sm max-w-none",children:e.content.split(/(```[\w]*\n[\s\S]*?```)/g).map((e,t)=>{if(e.startsWith("```")){let r=e.match(/```(\w+)?\n([\s\S]*?)```/);if(r){let e=r[1]||"text",l=r[2].trim();return(0,s.jsx)(i,{code:l,language:e},t)}}return(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:e.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-gray-900">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic text-gray-700">$1</em>').replace(/`([^`]+)`/g,'<code class="bg-gray-100 px-1 py-0.5 rounded text-sm font-mono text-gray-800">$1</code>')}},t)})}),(0,s.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.role?"text-blue-100":"text-gray-500"),children:e.timestamp.toLocaleTimeString()})]})},e.id))]}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"h-12 w-12 mx-auto mb-4 rounded-full bg-gradient-to-r from-blue-100 to-purple-100 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Start a conversation with AI"})]}),v&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-100 text-gray-900 max-w-xs lg:max-w-md px-4 py-2 rounded-lg mr-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"AI is thinking..."})]})})}),(0,s.jsx)("div",{ref:J})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 p-4 mt-auto",children:G?(0,s.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-6 text-center",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"h-16 w-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"h-8 w-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Message Limit Reached"}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm mb-4",children:["You've used all ",R," free messages. Upgrade to continue chatting with unlimited AI support."]})]}),(0,s.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Unlimited AI conversations"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Priority AI responses"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Advanced AI features"})]})]}),(0,s.jsxs)("a",{href:"/profile?tab=subscription",className:"cursor-pointer w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-semibold py-3 px-6 rounded-lg hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Upgrade to Premium"]})]}):(0,s.jsxs)("form",{onSubmit:es,className:"flex gap-3",children:[(0,s.jsx)("div",{className:"flex-1 relative",children:(0,s.jsx)("textarea",{ref:X,value:f,onChange:e=>j(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),es())},placeholder:l,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200",rows:1,style:{minHeight:"48px",maxHeight:"120px"},onInput:e=>{let s=e.target;s.style.height="auto",s.style.height="".concat(Math.min(s.scrollHeight,120),"px")},disabled:v})}),(0,s.jsx)("button",{type:"submit",disabled:!f.trim()||v,className:"cursor-pointer px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 font-semibold shadow-lg hover:shadow-xl ".concat(f.trim()?"hover:scale-105":""),style:{minWidth:f.trim()?"auto":"48px",width:f.trim()?"auto":"48px",height:"48px"},children:v?(0,s.jsx)("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]}):(0,s.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl shadow-xl border-2 border-blue-200 ".concat(a),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"AI Learning Assistant"})]}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm mb-6",children:['Get personalized help understanding "',n,'" with our AI tutor.']}),(0,s.jsxs)("button",{onClick:()=>{null==d||d(!0),window.scrollTo({top:0,behavior:"smooth"})},className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center justify-center gap-2 mb-4 cursor-pointer",children:[(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Begin AI Learning"]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{onClick:()=>k(!y),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1 mb-3 cursor-pointer",children:[y?"Show less":"What will it help with?",(0,s.jsx)("svg",{className:"h-4 w-4 transition-transform duration-200 ".concat(y?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Instant doubt resolution"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Personalized explanations"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"24/7 learning support"})]})]})]})]})}):(0,s.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl shadow-xl border-2 border-yellow-200 ".concat(a),children:[(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"AI Premium Learning"})]})}),(0,s.jsxs)("div",{className:"border-t border-gray-200 p-6 text-center",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"h-16 w-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"h-8 w-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unlock AI Premium Learning For"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-yellow-900 mb-2",children:n}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Get instant answers, explanations, and personalized learning assistance with our AI tutor."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Instant doubt resolution"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Personalized explanations"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"24/7 learning support"})]})]}),(0,s.jsxs)("a",{href:"/profile?tab=subscription",className:"cursor-pointer mt-6 w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-semibold py-3 px-6 rounded-lg hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Upgrade to AI Premium"]})]})]})}function d(e){let{blogId:r,chapterTopicId:l,courseId:n,blogSlug:i}=e,{isSignedIn:c,user:d}=(0,o.useUser)(),[x,h]=(0,t.useState)(!1),[m,u]=(0,t.useState)(null),[g,p]=(0,t.useState)(null),[f,j]=(0,t.useState)(!0);(0,t.useEffect)(()=>{c&&(r||l||n||i)?v():j(!1)},[c,r,l,n,i]);let v=async()=>{try{j(!0);let e=new URLSearchParams;r&&e.append("blogId",r),l&&e.append("chapterTopicId",l),n&&e.append("courseId",n),i&&e.append("blogSlug",i);let s=await fetch("/api/assessments?".concat(e.toString())),t=await s.json();if(t.success&&t.data.length>0){let e=t.data[0];if(u(e),"COMPLETED"===e.status){let s=e.assessmentQuestions.filter(e=>e.isCorrect).length,t=Math.round(s/e.totalQuestions*100);p({score:s,percentage:t,totalQuestions:e.totalQuestions})}}}catch(e){console.error("Error fetching assessment data:",e)}finally{j(!1)}};return c?f?(0,s.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-xl border-2 border-blue-200/60 p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-5 bg-gray-300 rounded w-24 mb-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded w-32"})]})]}),(0,s.jsx)("div",{className:"h-12 bg-gray-300 rounded-lg"})]})}):(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-xl border-2 border-blue-200/60 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:"AI Quiz"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:(null==m?void 0:m.status)==="COMPLETED"?"Review your quiz performance":(null==m?void 0:m.status)==="ACTIVE"?"Continue where you left off":"Test your knowledge"})]})]}),g&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-white/60 rounded-lg border border-blue-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Completed"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[g.percentage,"%"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[g.score,"/",g.totalQuestions," correct"]})]})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,s.jsx)("span",{children:"AI-Generated"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,s.jsx)("span",{children:"Instant Feedback"})]})]}),(0,s.jsxs)(a.default,{href:(null==m?void 0:m.status)==="COMPLETED"?"/blogs/".concat(i,"/assessment/results"):(null==m?void 0:m.status)==="ACTIVE"?"/blogs/".concat(i,"/assessment"):"/quiz?".concat(new URLSearchParams({...r&&{blogId:r},...l&&{chapterTopicId:l},...n&&{courseId:n},...i&&{slug:i}}).toString()),className:"group block w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white text-center py-3 rounded-lg font-bold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 relative overflow-hidden shadow-lg",children:[(0,s.jsxs)("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[(0,s.jsx)("span",{children:(null==m?void 0:m.status)==="COMPLETED"?"View Results":(null==m?void 0:m.status)==="ACTIVE"?"Resume Quiz":"Start Quiz"}),(0,s.jsx)("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out"})]})]}):(0,s.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl shadow-xl border-2 border-yellow-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:"AI Quiz"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Unlock personalized learning"})]})]}),(0,s.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"AI-Generated"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Instant Feedback"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Progress Track"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Customizable"})]})]}),(0,s.jsxs)(a.default,{href:"/sign-in",className:"group block w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-center py-3 rounded-lg font-bold hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 relative overflow-hidden shadow-lg",children:[(0,s.jsxs)("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,s.jsx)("span",{children:"Unlock AI Quizzes"})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out"})]})]})}var x=e.i(547);function h(){let e=(0,r.useParams)().slug,o=(0,r.useSearchParams)().get("chapter"),[i,h]=(0,t.useState)(!1),[m,u]=(0,t.useState)(null),[g,p]=(0,t.useState)(!0),[f,j]=(0,t.useState)(null),[v,b]=(0,t.useState)(!1),[w,N]=(0,t.useState)(null),[y,k]=(0,t.useState)(null);return((0,t.useEffect)(()=>{let s=async()=>{try{p(!0);let s=await fetch("/api/blogs/slug/".concat(encodeURIComponent(e)));if(!s.ok)return void(404===s.status?j("Blog not found"):j("Failed to load blog"));let t=await s.json();u(t)}catch(e){console.error("Error fetching blog:",e),j("Failed to load blog")}finally{p(!1)}};e&&s()},[e]),(0,t.useEffect)(()=>{(async()=>{if(o)try{let e=await fetch("/api/chapter-topics/public/".concat(o));if(!e.ok)return;let s=await e.json();N(s),s.progress&&k({completedBlogs:s.progress.completedBlogs||0,totalBlogs:s.progress.totalBlogs||0,progressPercentage:s.progress.progressPercentage||0}),s.isUserSignedIn&&h(!0)}catch(e){console.error("Failed to fetch chapter lessons",e)}})()},[o]),(0,t.useEffect)(()=>{(async()=>{if(m&&o)try{await fetch("/api/progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blogId:m.id,chapterId:o})})}catch(e){console.error("Failed to track progress:",e)}})()},[m,o]),g)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading blog..."})]})}):f||!m||"PUBLISHED"!==m.status?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:f||"Blog not found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"The blog you're looking for doesn't exist or has been removed."}),(0,s.jsx)(a.default,{href:"/blogs",className:"inline-flex items-center px-4 pt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"â† Back to Blogs"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30",children:[(0,s.jsx)(n.default,{}),!o&&(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsx)(a.default,{href:"/blogs",className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"â† Back to Blogs"})}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"grid gap-8 ".concat(v?"grid-cols-1 lg:grid-cols-2":"grid-cols-1 lg:grid-cols-3"),children:[(0,s.jsxs)("div",{className:"".concat(v?"lg:col-span-1":"lg:col-span-2"),children:[(0,s.jsx)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:(0,s.jsx)(l.default,{title:m.title,tags:m.tags,categories:m.categories.map(e=>e.category),sequences:m.sequences})}),w&&(()=>{let t=w.blogs.findIndex(s=>s.slug===e),r=t>=0?w.blogs[t+1]:null;return r?(0,s.jsxs)("div",{className:"mt-8 relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-700 p-4 sm:p-6 lg:p-8 shadow-xl",children:[(0,s.jsx)("div",{className:"absolute -top-4 -right-4 h-16 w-16 sm:h-20 sm:w-20 lg:h-24 lg:w-24 rounded-full bg-white/10"}),(0,s.jsx)("div",{className:"absolute -bottom-2 -left-2 h-12 w-12 sm:h-14 sm:w-14 lg:h-16 lg:w-16 rounded-full bg-white/5"}),(0,s.jsxs)("div",{className:"relative flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6",children:[(0,s.jsxs)("div",{className:"flex-1 text-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-400 animate-pulse"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm font-medium text-blue-100",children:"Continue Learning"})]}),(0,s.jsx)("h4",{className:"text-lg sm:text-xl font-bold text-white mb-2 line-clamp-2",children:r.title}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs sm:text-sm text-blue-100",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{className:"h-3 w-3 sm:h-4 sm:w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.206 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.794 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.794 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.206 18 16.5 18s-3.332.477-4.5 1.253m0-13C13.168 5.477 14.794 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.206 18 16.5 18s-3.332.477-4.5 1.253"})}),"Lesson ",t+2," of ",w.blogs.length]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{className:"h-3 w-3 sm:h-4 sm:w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Next up"]})]})]}),(0,s.jsxs)(a.default,{href:"/blogs/".concat(r.slug,"?chapter=").concat(o),className:"group relative overflow-hidden inline-flex items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 sm:px-6 sm:py-3 text-blue-700 font-semibold text-sm sm:text-base hover:bg-blue-50 hover:shadow-xl transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/50 w-full sm:w-auto",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out"}),(0,s.jsx)("span",{className:"relative z-10",children:"Next Lesson"}),(0,s.jsx)("svg",{className:"relative z-10 h-4 w-4 sm:h-5 sm:w-5 group-hover:translate-x-0.5 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}):null})()]}),(0,s.jsx)("div",{className:"".concat("lg:col-span-1"),children:v?(0,s.jsx)(c,{prompt:'You are an AI learning assistant helping users understand the blog content: "'.concat(null==m?void 0:m.title,'". \n                You can answer questions about the topic, provide explanations, clarify concepts, and help with learning. \n                Be helpful, accurate, and encourage learning.'),placeholder:"Ask me about this lesson...",blogTitle:(null==m?void 0:m.title)||"this content",isChatOpen:v,onChatToggle:b,blogId:null==m?void 0:m.id,chapterTopicId:o||void 0,className:"h-full"}):(0,s.jsxs)("div",{className:"space-y-6",children:[o&&(0,s.jsx)(d,{blogId:m.id,chapterTopicId:o,blogSlug:m.slug}),(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Blog Details"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Published"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:new Date(m.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Last Updated"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:new Date(m.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]}),w&&(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Other lessons in this chapter"}),(0,s.jsx)("div",{className:"space-y-2",children:w.blogs.map((t,r)=>{let l=t.slug===e;return(0,s.jsxs)(a.default,{href:"/blogs/".concat(t.slug,"?chapter=").concat(o),className:"flex items-center justify-between rounded-lg border p-3 transition-colors ".concat(l?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-gray-200 hover:bg-gray-50"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-7 w-7 rounded-full flex items-center justify-center text-xs font-semibold ".concat(l?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:r+1}),(0,s.jsx)("span",{className:"text-sm font-medium truncate max-w-[220px]",children:t.title})]}),(0,s.jsx)("svg",{className:"h-4 w-4 ".concat(l?"text-blue-600":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},t.id)})})]}),(0,s.jsx)(c,{prompt:'You are an AI learning assistant helping users understand the blog content: "'.concat(null==m?void 0:m.title,'". \n                  You can answer questions about the topic, provide explanations, clarify concepts, and help with learning. \n                  Be helpful, accurate, and encourage learning.'),placeholder:"Ask me about this lesson...",blogTitle:(null==m?void 0:m.title)||"this content",isChatOpen:v,onChatToggle:b,className:"mt-6"}),w&&!i&&(0,s.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl shadow-2xl p-8 transform hover:scale-[1.02] transition-all duration-300",children:[(0,s.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-white/20 to-transparent"}),(0,s.jsx)("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full"}),(0,s.jsx)("div",{className:"absolute -bottom-4 -left-4 w-32 h-32 bg-white/5 rounded-full"})]}),(0,s.jsxs)("div",{className:"relative z-10 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,s.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-white mb-3",children:"Unlock Your Learning Journey"}),(0,s.jsx)("p",{className:"text-blue-100 mb-8 text-lg leading-relaxed max-w-md mx-auto",children:"Sign in to track your progress, save your journey, and get personalized AI support for this chapter."}),(0,s.jsxs)(a.default,{href:"/sign-in?redirect_url=".concat(encodeURIComponent(window.location.href)),className:"inline-flex items-center justify-center px-8 py-4 bg-white text-blue-700 text-lg font-semibold rounded-xl hover:bg-blue-50 hover:shadow-xl transform hover:scale-105 transition-all duration-300 shadow-lg",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In to Continue"]}),(0,s.jsxs)("div",{className:"mt-8 flex flex-wrap justify-center gap-6 text-sm text-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,s.jsx)("span",{children:"Track Progress"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,s.jsx)("span",{children:"Save Journey"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,s.jsx)("span",{children:"AI Support"})]})]})]})]}),w&&i&&y?(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Chapter Progress"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:(0,s.jsxs)("span",{children:["Chapter: ",w.name]})}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(y.progressPercentage,"%")}})}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:[y.completedBlogs,"/",y.totalBlogs," Lessons Completed"]}),(0,s.jsxs)("span",{children:[y.progressPercentage,"% Complete"]})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Learning in Progress"})]}),100===y.progressPercentage&&(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Chapter Completed!"})]})]})]}):w&&i&&!y?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-red-800",children:"Progress Not Available"}),(0,s.jsx)("p",{className:"text-sm text-red-700",children:"Chapter data is available but chapter progress could not be loaded."})]}):null,(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Author"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:m.author.imageUrl?(0,s.jsx)("img",{src:m.author.imageUrl,alt:m.author.name,className:"w-12 h-12 rounded-full object-cover"}):(0,s.jsx)("span",{className:"text-blue-600 font-semibold text-lg",children:m.author.name.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:m.author.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:m.author.email})]})]})]}),m.tags.length>0&&(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tags"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:m.tags.map((e,t)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},t))})]}),m.categories.length>0&&(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Categories"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:m.categories.map(e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.category.name},e.category.id))})]})]})})]})}),(0,s.jsx)(x.default,{})]})}function m(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,s.jsx)(h,{})})}}]);