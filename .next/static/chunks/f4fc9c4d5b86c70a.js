(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";e.s(["default",()=>l],75254);var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,t.forwardRef)((e,r)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...g}=e;return(0,t.createElement)("svg",{ref:r,...i,width:l,height:l,stroke:a,strokeWidth:o?24*Number(n)/Number(l):n,className:s("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(g)&&{"aria-hidden":"true"},...g},[...u.map(e=>{let[r,s]=e;return(0,t.createElement)(r,s)}),...Array.isArray(d)?d:[d]])}),l=(e,i)=>{let l=(0,t.forwardRef)((l,n)=>{let{className:o,...c}=l;return(0,t.createElement)(a,{ref:n,iconNode:i,className:s("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return l.displayName=r(e),l}},7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},37727,e=>{"use strict";e.s(["X",()=>t],37727);let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},87990,e=>{"use strict";e.s(["default",()=>z],87990);var t=e.i(43476),r=e.i(71645),s=e.i(18566),i=e.i(7233),a=e.i(37727),l=e.i(75254);let n=(0,l.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),o=(0,l.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var c=e.i(30009),d=e.i(94499),u=e.i(56378),g=e.i(34236);e.i(27427);var m=e.i(97643),b=e.i(63612),h=e.i(3869),x=e.i(55917),p=e.i(36110);e.i(17556),e.i(96075),e.i(70010);var f=e.i(1113),y=e.i(92326),v=e.i(2323),N=e.i(76399);e.i(33287);var j=e.i(80314),w=e.i(694),C=e.i(61319),E=e.i(96889),k=e.i(43551),T=e.i(80277),M=e.i(68930),_=e.i(36813),I=e.i(32547),O=e.i(22985),A=e.i(50250),S=e.i(26040),L=e.i(7237),q=e.i(23108),D=e.i(10411),B=e.i(16571),R=e.i(36047),H=e.i(28156),U=e.i(11703),F=e.i(63181),P=e.i(85948);let K=(0,w.createLowlight)();function z(e){var l;let{initialData:w,isEditing:E=!1,courseId:k}=e,[T,M]=(0,r.useState)({courseId:(null==w?void 0:w.courseId)||k||"",sequenceNumber:(null==w?void 0:w.sequenceNumber)||1,name:(null==w?void 0:w.name)||"",description:(null==w?void 0:w.description)||""}),_=(0,d.useEditor)({extensions:[u.default,g.TextStyle.extend({addAttributes(){var e;return{...null==(e=this.parent)?void 0:e.call(this),fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:"font-size: ".concat(e.fontSize)}:{}},fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:"font-family: ".concat(e.fontFamily)}:{}}}}}),g.Color,m.TextAlign.configure({types:["heading","paragraph"]}),b.Link.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline cursor-pointer"}}),h.Image.configure({HTMLAttributes:{class:"max-w-full h-auto rounded-lg"}}),x.CodeBlockLowlight.configure({lowlight:K,HTMLAttributes:{class:"bg-gray-900 text-gray-100 rounded-lg p-4 my-4 overflow-x-auto font-mono text-sm"}}),p.Table.configure({resizable:!0,HTMLAttributes:{class:"table-auto border-collapse"}}),p.TableRow,p.TableHeader,p.TableCell,f.HorizontalRule,y.Subscript,v.Superscript,N.Underline,g.FontFamily.configure({types:["textStyle"]}),j.Emoji.configure({enableEmoticons:!0,suggestion:{items:e=>{let{query:t}=e;return["ðŸ˜€","ðŸ˜ƒ","ðŸ˜„","ðŸ˜","ðŸ˜†","ðŸ˜…","ðŸ¤£","ðŸ˜‚","ðŸ™‚","ðŸ™ƒ","ðŸ˜‰","ðŸ˜Š","ðŸ˜‡","ðŸ¥°","ðŸ˜","ðŸ¤©","ðŸ˜˜","ðŸ˜—","ðŸ˜š","ðŸ˜™","ðŸ˜‹","ðŸ˜›","ðŸ˜œ","ðŸ¤ª","ðŸ˜","ðŸ¤‘","ðŸ¤—","ðŸ¤­","ðŸ¤«","ðŸ¤”","ðŸ¤","ðŸ¤¨","ðŸ˜","ðŸ˜‘","ðŸ˜¶","ðŸ˜","ðŸ˜’","ðŸ™„","ðŸ˜¬","ðŸ¤¥","ðŸ˜Œ","ðŸ˜”","ðŸ˜ª","ðŸ¤¤","ðŸ˜´","ðŸ˜·","ðŸ¤’","ðŸ¤•","ðŸ¤¢","ðŸ¤®","ðŸ¤§","ðŸ¥µ","ðŸ¥¶","ðŸ¥´","ðŸ˜µ","ðŸ¤¯","ðŸ¤ ","ðŸ¥³","ðŸ˜Ž","ðŸ¤“","ðŸ§","ðŸ˜•","ðŸ˜Ÿ","ðŸ™","â˜¹ï¸","ðŸ˜®","ðŸ˜¯","ðŸ˜²","ðŸ˜³","ðŸ¥º","ðŸ˜¦","ðŸ˜§","ðŸ˜¨","ðŸ˜°","ðŸ˜¥","ðŸ˜¢","ðŸ˜­","ðŸ˜±","ðŸ˜–","ðŸ˜£","ðŸ˜ž","ðŸ˜“","ðŸ˜©","ðŸ˜«","ðŸ¥±","ðŸ˜¤","ðŸ˜¡","ðŸ˜ ","ðŸ¤¬","ðŸ˜ˆ","ðŸ‘¿","ðŸ’€","â˜ ï¸","ðŸ’©","ðŸ¤¡","ðŸ‘¹","ðŸ‘º","ðŸ‘»","ðŸ‘½","ðŸ‘¾","ðŸ¤–","ðŸ˜º","ðŸ˜¸","ðŸ˜¹","ðŸ˜»","ðŸ˜¼","ðŸ˜½","ðŸ™€","ðŸ˜¿","ðŸ˜¾"].filter(e=>e.toLowerCase().startsWith(t.toLowerCase())).slice(0,10)}}})],content:T.description,immediatelyRender:!1,onUpdate:e=>{let{editor:t}=e,r=t.getHTML();M(e=>({...e,description:r}))},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[120px] p-3"}}});(0,r.useEffect)(()=>{_&&T.description!==_.getHTML()&&_.commands.setContent(T.description)},[T.description,_]);let[I,O]=(0,r.useState)((null==w||null==(l=w.blogRelations)?void 0:l.map(e=>({id:e.id,sequence:e.sequence,blogId:e.blogId,blog:e.blog})))||[]),[A,S]=(0,r.useState)(!1),[L,q]=(0,r.useState)(""),[D,B]=(0,r.useState)([]),[R,H]=(0,r.useState)([]),[U,F]=(0,r.useState)(!0),[P,z]=(0,r.useState)(null),[G]=(0,r.useState)(!0),$=(0,s.useRouter)();(0,r.useEffect)(()=>{Q()},[]);let Q=async()=>{try{F(!0);let[e,t]=await Promise.all([fetch("/api/courses"),fetch("/api/blogs/public")]);if(!e.ok||!t.ok)throw Error("Failed to fetch data");let[r,s]=await Promise.all([e.json(),t.json()]),i=await Promise.all((r.data||[]).map(async e=>{try{let t=await fetch("/api/admin/chapter-topics/".concat(e.id));if(t.ok){let r=await t.json();return{...e,chapterTopics:r.data||[]}}return{...e,chapterTopics:[]}}catch(t){return console.error("Error fetching chapters for course ".concat(e.id,":"),t),{...e,chapterTopics:[]}}}));B(i),H(s.data||[])}catch(e){q(e instanceof Error?e.message:"Failed to fetch data")}finally{F(!1)}},W=async e=>{if(e.preventDefault(),S(!0),q(""),Z(T.sequenceNumber)){q("This sequence number is already used in this course. Please choose a different number."),S(!1);return}try{let e=E?"/api/chapter-topics/".concat(null==w?void 0:w.id):"/api/chapter-topics",t=E?"PUT":"POST",r=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify({...T,blogSequences:I.map(e=>({blogId:e.blogId,sequence:e.sequence}))})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to save chapter topic")}await r.json(),$.push("/admin/courses/".concat(T.courseId))}catch(e){q(e instanceof Error?e.message:"Failed to save chapter topic")}finally{S(!1)}},X=(e,t)=>{M(r=>({...r,[e]:t}))},Z=e=>!!Y&&Y.chapterTopics.some(t=>t.sequenceNumber===e&&t.id!==(null==w?void 0:w.id)),J=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},V=()=>{z(null)},Y=D.find(e=>e.id===T.courseId);return U?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,t.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:E?"Edit Chapter Topic":"Create Chapter Topic"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:E?"Update chapter topic information":"Fill in the details to create a new chapter topic"})]}),(0,t.jsxs)("form",{onSubmit:W,className:"p-6 space-y-6",children:[L&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,t.jsx)("span",{className:"block sm:inline",children:L})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"courseId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course *"}),(0,t.jsxs)("select",{id:"courseId",value:T.courseId,onChange:e=>X("courseId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:A||!!k,children:[(0,t.jsx)("option",{value:"",children:"Select a course"}),D.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"sequenceNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sequence Number *"}),(0,t.jsx)("input",{type:"number",id:"sequenceNumber",value:T.sequenceNumber||"",onChange:e=>{let t=e.target.value;X("sequenceNumber",""===t?1:parseInt(t,10))},className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:border-blue-500 ".concat(Z(T.sequenceNumber)?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),min:"1",required:!0,disabled:A}),Z(T.sequenceNumber)&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"This sequence number is already used in this course. Please choose a different number."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Name *"}),(0,t.jsx)("input",{type:"text",id:"name",value:T.name,onChange:e=>X("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter chapter name",required:!0,disabled:A})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,t.jsxs)("div",{className:"border border-gray-300 rounded-lg shadow-sm focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500",children:[_&&(0,t.jsx)(function(e){let{editor:s}=e,[i,a]=(0,r.useState)(!1),l=(0,d.useEditorState)({editor:s,selector:e=>{var t,r,s,i,a,l,n,o,c,d,u,g,m,b,h,x,p,f,y,v,N,j;return{isBold:null!=(t=e.editor.isActive("bold"))&&t,canBold:null!=(r=e.editor.can().chain().toggleBold().run())&&r,isItalic:null!=(s=e.editor.isActive("italic"))&&s,canItalic:null!=(i=e.editor.can().chain().toggleItalic().run())&&i,isUnderline:null!=(a=e.editor.isActive("underline"))&&a,canUnderline:null!=(l=e.editor.can().chain().toggleUnderline().run())&&l,isStrike:null!=(n=e.editor.isActive("strike"))&&n,canStrike:null!=(o=e.editor.can().chain().toggleStrike().run())&&o,isCode:null!=(c=e.editor.isActive("code"))&&c,canCode:null!=(d=e.editor.can().chain().toggleCode().run())&&d,isParagraph:null!=(u=e.editor.isActive("paragraph"))&&u,isHeading1:null!=(g=e.editor.isActive("heading",{level:1}))&&g,isHeading2:null!=(m=e.editor.isActive("heading",{level:2}))&&m,isHeading3:null!=(b=e.editor.isActive("heading",{level:3}))&&b,isBulletList:null!=(h=e.editor.isActive("bulletList"))&&h,isOrderedList:null!=(x=e.editor.isActive("orderedList"))&&x,isBlockquote:null!=(p=e.editor.isActive("blockquote"))&&p,canUndo:null!=(f=e.editor.can().chain().undo().run())&&f,canRedo:null!=(y=e.editor.can().chain().redo().run())&&y,isAlignLeft:null!=(v=e.editor.isActive({textAlign:"left"}))&&v,isAlignCenter:null!=(N=e.editor.isActive({textAlign:"center"}))&&N,isAlignRight:null!=(j=e.editor.isActive({textAlign:"right"}))&&j,currentColor:e.editor.getAttributes("textStyle").color||""}}});return(0,t.jsxs)("div",{className:"border border-gray-300 border-b-0 rounded-t-lg bg-gray-50 p-2 flex flex-wrap gap-1 relative",children:[(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleBold().run(),disabled:!l.canBold,className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isBold?"bg-gray-300":""),title:"Bold",children:(0,t.jsx)("strong",{children:"B"})}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleItalic().run(),disabled:!l.canItalic,className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isItalic?"bg-gray-300":""),title:"Italic",children:(0,t.jsx)("em",{children:"I"})}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleUnderline().run(),disabled:!l.canUnderline,className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isUnderline?"bg-gray-300":""),title:"Underline",children:(0,t.jsx)("u",{children:"U"})}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleStrike().run(),disabled:!l.canStrike,className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isStrike?"bg-gray-300":""),title:"Strikethrough",children:(0,t.jsx)("s",{children:"S"})}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleCode().run(),disabled:!l.canCode,className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isCode?"bg-gray-300":""),title:"Inline Code",children:"</>"}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().setParagraph().run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isParagraph?"bg-gray-300":""),title:"Paragraph",children:"P"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:1}).run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isHeading1?"bg-gray-300":""),title:"Heading 1",children:"H1"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:2}).run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isHeading2?"bg-gray-300":""),title:"Heading 2",children:"H2"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:3}).run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isHeading3?"bg-gray-300":""),title:"Heading 3",children:"H3"}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleBulletList().run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isBulletList?"bg-gray-300":""),title:"Bullet List",children:"â€¢"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleOrderedList().run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isOrderedList?"bg-gray-300":""),title:"Numbered List",children:"1."}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().toggleBlockquote().run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isBlockquote?"bg-gray-300":""),title:"Quote",children:'"'}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().setTextAlign("left").run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isAlignLeft?"bg-gray-300":""),title:"Align Left",children:"â¬…"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().setTextAlign("center").run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isAlignCenter?"bg-gray-300":""),title:"Align Center",children:"â†”"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().setTextAlign("right").run(),className:"px-3 py-1 text-sm rounded hover:bg-gray-200 ".concat(l.isAlignRight?"bg-gray-300":""),title:"Align Right",children:"âž¡"}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().undo().run(),disabled:!l.canUndo,className:"px-3 py-1 text-sm rounded hover:bg-gray-200",title:"Undo",children:"â†¶"}),(0,t.jsx)("button",{onClick:()=>s.chain().focus().redo().run(),disabled:!l.canRedo,className:"px-3 py-1 text-sm rounded hover:bg-gray-200",title:"Redo",children:"â†·"}),(0,t.jsx)("input",{type:"color",onChange:e=>s.chain().focus().setColor(e.target.value).run(),value:l.currentColor||"#000000",className:"w-8 h-8 border border-gray-300 rounded cursor-pointer",title:"Text Color"}),(0,t.jsx)("button",{onClick:()=>a(!i),className:"px-3 py-1 text-sm rounded hover:bg-gray-200",title:"Emoji",children:"ðŸ˜€"}),i&&(0,t.jsx)("div",{className:"absolute top-full left-0 z-50 mt-1",children:(0,t.jsx)(C.default,{onEmojiClick:e=>{s.chain().focus().insertContent(e.emoji).run(),a(!1)},width:300,height:400})})]})},{editor:_}),(0,t.jsx)("div",{className:"border border-gray-300 border-t-0 rounded-b-lg overflow-hidden",children:(0,t.jsx)(d.EditorContent,{editor:_,className:"prose prose-sm max-w-none p-3 min-h-[120px] focus:outline-none"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Blog Sequences"}),(0,t.jsxs)("button",{type:"button",onClick:()=>{let e=Math.max(...I.map(e=>e.sequence),0)+1;O([...I,{id:"temp-".concat(Date.now()),sequence:e,blogId:"",blog:{}}])},className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",disabled:A,children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4 mr-1"}),"Add Blog"]})]}),0===R.length&&(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"No Blogs Available"}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-yellow-700",children:[(0,t.jsx)("p",{children:"You need to create some blogs before you can add them to chapter topics."}),(0,t.jsx)("p",{className:"mt-1",children:(0,t.jsx)("a",{href:"/admin/blogs",className:"font-medium underline text-yellow-800 hover:text-yellow-900",children:"Go to Blogs Management â†’"})})]})]})]})}),(0,t.jsx)("div",{className:"space-y-3",children:I.map((e,r)=>(0,t.jsxs)("div",{draggable:!0,onDragStart:e=>{z(r),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",r.toString())},onDragOver:J,onDrop:e=>((e,t)=>{e.preventDefault();let r=parseInt(e.dataTransfer.getData("text/plain"));r!==t&&((e,t)=>{if(e===t)return;let r=I[e],s=[...I];s.splice(e,1),s.splice(t,0,r),O(s.map((e,t)=>({...e,sequence:t+1})))})(r,t),z(null)})(e,r),onDragEnd:V,className:"border border-gray-200 rounded-lg p-4 bg-gray-50 transition-all duration-200 cursor-move ".concat(P===r?"opacity-50 transform rotate-2 scale-105 shadow-lg":"hover:shadow-md"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(n,{className:"w-4 h-4 text-gray-400 cursor-move"}),(0,t.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-xs font-medium text-blue-600",children:e.sequence}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Blog ",e.sequence]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void O(I.filter(e=>e.id!==t).sort((e,t)=>e.sequence-t.sequence).map((e,t)=>({...e,sequence:t+1})))},className:"text-red-500 hover:text-red-700 text-sm",disabled:A,children:(0,t.jsx)(a.X,{className:"w-4 h-4"})})]}),(0,t.jsx)(c.default,{options:R.map(e=>({value:e.id,label:"".concat(e.title," [").concat(e.status,"]")})),value:e.blogId||"",onChange:t=>{var r,s;return r=e.id,s={blogId:t||void 0},void O(I.map(e=>{if(e.id===r){let t={...e,...s};if(s.blogId){let e=R.find(e=>e.id===s.blogId);e&&(t.blog=e)}else(void 0===s.blogId||""===s.blogId)&&(t.blogId="",t.blog={});return t}return e}))},placeholder:0===R.length?"No blogs available":"Select a blog",disabled:A,className:"w-full"}),e.blog&&e.blog.title&&(0,t.jsx)("div",{className:"mt-2 p-2 bg-white rounded border",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("strong",{children:"Selected:"})," ",e.blog.title,(0,t.jsx)("span",{className:"ml-2 px-2 py-1 text-xs rounded-full ".concat("PUBLISHED"===e.blog.status?"bg-green-100 text-green-800":"DRAFT"===e.blog.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.blog.status})]})})]},e.id))})]}),(0,t.jsx)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>$.back(),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:A,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!T.courseId||!T.name.trim()||!T.description.trim()||A,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),E?"Updating...":"Creating..."]}):(0,t.jsx)(t.Fragment,{children:E?"Update Chapter Topic":"Create Chapter Topic"})})]})})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Preview"})}),(0,t.jsx)("div",{className:"p-6",children:Y?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-blue-900",children:Y.name}),(0,t.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:Y.description})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(()=>{let e=Y.chapterTopics.map(e=>({...e,isFormData:!1}));if(E&&(null==w?void 0:w.id)){let t={id:w.id,courseId:T.courseId,sequenceNumber:T.sequenceNumber,name:T.name,description:T.description,blogRelations:I.map(e=>({id:e.id,blogId:e.blogId,sequence:e.sequence,blog:e.blog})),isFormData:!0},r=e.findIndex(e=>e.id===w.id);-1!==r&&(e[r]=t)}return e.sort((e,t)=>e.sequenceNumber-t.sequenceNumber).map((e,r)=>{var s;let i=e.isFormData||E&&e.id===(null==w?void 0:w.id);return(0,t.jsxs)("div",{className:"rounded-lg p-4 ".concat(i?"bg-blue-50 border-2 border-blue-200":"bg-gray-50"),children:[(0,t.jsxs)("h2",{className:"text-lg font-bold mb-2 ".concat(i?"text-blue-900":"text-gray-900"),children:["Chapter ",e.sequenceNumber,": ",e.name,i&&(0,t.jsx)("span",{className:"ml-2 text-sm font-normal text-blue-600",children:"(Editing)"})]}),(0,t.jsxs)("details",{className:"group",open:i,children:[(0,t.jsxs)("summary",{className:"cursor-pointer text-sm flex items-center ".concat(i?"text-blue-700 hover:text-blue-900":"text-gray-600 hover:text-gray-900"),children:[(0,t.jsx)("span",{className:"mr-2",children:(0,t.jsx)(o,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e.description||"Chapter description will appear here"}})]}),(0,t.jsx)("div",{className:"mt-2 pl-4 border-l-2 ".concat(i?"border-blue-300":"border-gray-300"),children:(0,t.jsxs)("div",{className:"space-y-2",children:[null==(s=e.blogRelations)?void 0:s.filter(e=>e.blog&&e.blog.title).sort((e,t)=>e.sequence-t.sequence).map(e=>(0,t.jsxs)("div",{className:"text-sm flex items-center ".concat(i?"text-blue-700":"text-gray-700"),children:[(0,t.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium mr-2 ".concat("bg-blue-100 text-blue-600"),children:e.sequence}),e.blog.title]},e.id)),(!e.blogRelations||0===e.blogRelations.length)&&(0,t.jsx)("p",{className:"text-sm italic ".concat(i?"text-blue-500":"text-gray-500"),children:"No blogs added yet"})]})})]})]},e.id)})})(),T.name&&!E&&(0,t.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold text-green-900 mb-2",children:["Chapter ",T.sequenceNumber,": ",T.name]}),(0,t.jsxs)("details",{className:"group",open:!0,children:[(0,t.jsxs)("summary",{className:"cursor-pointer text-sm text-green-700 hover:text-green-900 flex items-center",children:[(0,t.jsx)("span",{className:"mr-2",children:(0,t.jsx)(o,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:T.description||"Chapter description will appear here"}})]}),(0,t.jsx)("div",{className:"mt-2 pl-4 border-l-2 border-green-300",children:(0,t.jsxs)("div",{className:"space-y-2",children:[I.filter(e=>e.blogId&&e.blog.title).sort((e,t)=>e.sequence-t.sequence).map(e=>(0,t.jsxs)("div",{className:"text-sm text-green-700 flex items-center",children:[(0,t.jsx)("span",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center text-xs font-medium text-green-600 mr-2",children:e.sequence}),e.blog.title]},e.id)),0===I.filter(e=>e.blogId&&e.blog.title).length&&(0,t.jsx)("p",{className:"text-sm text-green-500 italic",children:"No blogs added yet"})]})})]})]})]})]}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Select a course to see preview"})})})]})]})})}K.register("javascript",E.default),K.register("typescript",k.default),K.register("python",T.default),K.register("java",M.default),K.register("cpp",_.default),K.register("csharp",function(e){let t={keyword:["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"].concat(["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"]),built_in:["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],literal:["default","false","null","true"]},r=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),s={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},i={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},a=e.inherit(i,{illegal:/\n/}),l={className:"subst",begin:/\{/,end:/\}/,keywords:t},n=e.inherit(l,{illegal:/\n/}),o={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,n]},c={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},l]},d=e.inherit(c,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},n]});l.contains=[c,o,i,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,s,e.C_BLOCK_COMMENT_MODE],n.contains=[d,o,a,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,s,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];let u={variants:[{className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},c,o,i,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},g={begin:"<",end:">",contains:[{beginKeywords:"in out"},r]},m=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",b={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:t,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},u,s,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},r,g,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[r,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[r,g,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+m+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:t,contains:[{beginKeywords:"public private protected static internal protected abstract async extern override unsafe virtual new sealed partial",relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,g],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,relevance:0,contains:[u,s,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},b]}}),K.register("php",I.default),K.register("ruby",O.default),K.register("go",A.default),K.register("rust",S.default),K.register("swift",L.default),K.register("kotlin",q.default),K.register("sql",D.default),K.register("html",B.default),K.register("css",R.default),K.register("json",H.default),K.register("yaml",U.default),K.register("bash",F.default),K.register("markdown",P.default)},67315,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(43476),r=e.i(71645),s=e.i(87990);function i(e){let{params:i}=e,a=(0,r.use)(i);return(0,t.jsx)(s.default,{courseId:a.id})}}]);