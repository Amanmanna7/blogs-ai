module.exports=[78130,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(87924),c=a.i(72131),d=a.i(83069),e=a.i(38246);function f(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),{isAdmin:k}=(0,d.useRole)();(0,c.useEffect)(()=>{l()},[]);let l=async()=>{try{h(!0);let a=await fetch("/api/users");if(!a.ok)throw Error("Failed to fetch users");let b=await a.json();f(b.users||[])}catch(a){console.error("Error fetching users:",a),j("Failed to load users")}finally{h(!1)}},m=async(a,b)=>{try{if(!(await fetch(`/api/users/${a}/role`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:b})})).ok)throw Error("Failed to update user role");f(c=>c.map(c=>c.id===a?{...c,role:b}:c))}catch(a){console.error("Error updating user role:",a),alert("Failed to update user role")}};return k?g?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading users..."})]})}):i?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:i}),(0,b.jsx)("button",{onClick:l,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Again"})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage users and their roles in the system"})]}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:[a.length," total users"]})})]})})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"All Users"})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[a.imageUrl?(0,b.jsx)("img",{className:"h-10 w-10 rounded-full",src:a.imageUrl,alt:a.name||"User"}):(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a.name?.charAt(0)||a.email.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name||"Anonymous"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.email})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("select",{value:a.role,onChange:b=>m(a.id,b.target.value),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(a=>{switch(a){case"ADMIN":return"bg-red-100 text-red-800";case"EDITOR":return"bg-blue-100 text-blue-800";case"AUTHOR":return"bg-green-100 text-green-800";case"MODERATOR":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(a.role)} border-0 focus:ring-2 focus:ring-blue-500`,children:[(0,b.jsx)("option",{value:"USER",children:"User"}),(0,b.jsx)("option",{value:"AUTHOR",children:"Author"}),(0,b.jsx)("option",{value:"EDITOR",children:"Editor"}),(0,b.jsx)("option",{value:"MODERATOR",children:"Moderator"}),(0,b.jsx)("option",{value:"ADMIN",children:"Administrator"})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(a.updatedAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(e.default,{href:`/admin/users/${a.id}`,className:"text-blue-600 hover:text-blue-900",children:"View"}),(0,b.jsx)("button",{onClick:()=>{confirm(`Are you sure you want to delete ${a.name||a.email}?`)&&console.log("Delete user:",a.id)},className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},a.id))})]})})]})})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page."}),(0,b.jsx)(e.default,{href:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go Home"})]})})}}];

//# sourceMappingURL=src_app_admin_users_page_tsx_aef2c918._.js.map