{"version":3,"sources":["turbopack:///[project]/src/app/admin/blog-contents/[id]/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, use } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { useRole } from '@/hooks/useRole';\nimport BlogContentDisplay from '@/components/BlogContentDisplay';\n\ninterface BlogContent {\n  id: string;\n  textContent: string;\n  createdAt: string;\n  updatedAt: string;\n  createdBy: {\n    id: string;\n    name: string | null;\n    email: string;\n    imageUrl: string | null;\n  };\n}\n\ninterface BlogContentPageProps {\n  params: Promise<{ id: string }>;\n}\n\nexport default function BlogContentPage({ params }: BlogContentPageProps) {\n  const resolvedParams = use(params);\n  const [blogContent, setBlogContent] = useState<BlogContent | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n  const { user, isAuthor, isEditor } = useRole();\n\n  useEffect(() => {\n    fetchBlogContent();\n  }, [resolvedParams.id]);\n\n  const fetchBlogContent = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`/api/blog-content/${resolvedParams.id}`);\n      \n      if (!response.ok) {\n        if (response.status === 404) {\n          setError('Blog content not found');\n        } else if (response.status === 403) {\n          setError('You don\\'t have permission to view this content');\n        } else {\n          setError('Failed to load blog content');\n        }\n        return;\n      }\n      \n      const data = await response.json();\n      setBlogContent(data.blogContent);\n    } catch (error) {\n      console.error('Error fetching blog content:', error);\n      setError('Failed to load blog content');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this blog content?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`/api/blog-content/${resolvedParams.id}`, {\n        method: 'DELETE',\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete blog content');\n      }\n\n      router.push('/admin/blog-contents');\n    } catch (error) {\n      console.error('Error deleting blog content:', error);\n      alert('Failed to delete blog content');\n    }\n  };\n\n  // Format date\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Check if user can edit this content\n  const canEdit = blogContent && (isEditor || blogContent.createdBy.id === user?.id);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading blog content...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-red-600 mb-4\">Error</h1>\n          <p className=\"text-gray-600 mb-6\">{error}</p>\n          <div className=\"space-x-4\">\n            <button\n              onClick={fetchBlogContent}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              Try Again\n            </button>\n            <Link\n              href=\"/admin/blog-contents\"\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              Go Back\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!blogContent) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Blog Content Not Found</h1>\n          <p className=\"text-gray-600 mb-6\">The blog content you're looking for doesn't exist.</p>\n          <Link\n            href=\"/blogs\"\n            className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            Go Back to Blog Contents\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center py-6\">\n            <div className=\"flex items-center space-x-4\">\n              <Link\n                href=\"/admin/blog-contents\"\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                </svg>\n              </Link>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Blog Content</h1>\n                <p className=\"text-sm text-gray-500\">\n                  Created by {blogContent.createdBy.name || 'Anonymous'} â€¢ {formatDate(blogContent.createdAt)}\n                  {blogContent.createdAt !== blogContent.updatedAt && (\n                    <span className=\"ml-2 text-blue-600\">(Edited {formatDate(blogContent.updatedAt)})</span>\n                  )}\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              {canEdit && (\n                <>\n                  <Link\n                    href={`/admin/blog-contents/${resolvedParams.id}/edit`}\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\n                  >\n                    <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                    </svg>\n                    Edit\n                  </Link>\n                  <button\n                    onClick={handleDelete}\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                  >\n                    <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                    Delete\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-white shadow-lg rounded-lg overflow-hidden\">\n          <div className=\"px-6 py-8\">\n            <div className=\"max-w-none\">\n              <BlogContentDisplay content={blogContent.textContent} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}