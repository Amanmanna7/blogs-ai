module.exports=[20525,a=>{"use strict";a.s(["default",()=>j],20525);var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(83069),f=a.i(50944);function g({content:a,isOpen:c,onClose:d}){return c&&a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Preview: ",a.name]}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[(0,b.jsx)("strong",{children:"Slug:"})," ",a.slug]}),(0,b.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:[(0,b.jsx)("strong",{children:"Created:"})," ",new Date(a.createdAt).toLocaleDateString()," at ",new Date(a.createdAt).toLocaleTimeString()]})]}),(0,b.jsx)("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:a.textContent}})]}),(0,b.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,b.jsx)("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Close"})})]})}):null}function h({content:a,isOpen:c,onClose:d,onConfirm:e}){return c&&a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center mb-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,b.jsx)("div",{className:"ml-3",children:(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Blog Content"})})]}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete ",(0,b.jsxs)("strong",{children:['"',a.name,'"']}),"? This action cannot be undone."]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,b.jsx)("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,b.jsx)("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete"})]})]})})}):null}function i({blogContents:a,onDelete:d,canEdit:e}){let[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),s=(0,f.useRouter)(),t=async()=>{if(m){r(!0);try{await d(m.id),p(!1),n(null)}catch(a){console.error("Error deleting content:",a)}finally{r(!1)}}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content Preview"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Author"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-500 font-mono",children:a.slug})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"text-sm text-gray-900 max-w-xs",children:((a,b=100)=>a.length<=b?a:a.substring(0,b)+"...")((a=>{let b=document.createElement("div");return b.innerHTML=a,b.textContent||b.innerText||""})(a.textContent),80)})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:a.createdBy.imageUrl?(0,b.jsx)("img",{className:"h-8 w-8 rounded-full",src:a.createdBy.imageUrl,alt:a.createdBy.name||"User"}):(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a.createdBy.name?.charAt(0)||"U"})})}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.createdBy.name||"Unknown User"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.createdBy.email})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("button",{onClick:()=>{s.push(`/admin/blog-contents/${a.id}`)},className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-md transition-all duration-200 cursor-pointer",title:"View full content",children:(0,b.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,b.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:"View full content"})]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("button",{onClick:()=>{j(a),l(!0)},className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-md transition-all duration-200 cursor-pointer",title:"Preview content",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,b.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:"Preview content"})]}),e(a)&&(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("button",{onClick:()=>{s.push(`/admin/blog-contents/${a.id}/edit`)},className:"p-2 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-md transition-all duration-200 cursor-pointer",title:"Edit content",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,b.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:"Edit content"})]}),e(a)&&(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("button",{onClick:()=>{n(a),p(!0)},className:"p-2 text-red-600 hover:text-red-900 hover:bg-red-50 rounded-md transition-all duration-200 cursor-pointer",title:"Delete content",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,b.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:"Delete content"})]})]})})]},a.id))})]})})}),(0,b.jsx)(g,{content:i,isOpen:k,onClose:()=>l(!1)}),(0,b.jsx)(h,{content:m,isOpen:o,onClose:()=>p(!1),onConfirm:t})]})}function j(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null),{user:l,isAuthor:m,isEditor:n}=(0,e.useRole)();(0,c.useEffect)(()=>{o()},[]);let o=async()=>{try{h(!0);let a=await fetch("/api/blog-content");if(!a.ok)throw Error("Failed to fetch blog contents");let b=await a.json();f(b.blogContents)}catch(a){console.error("Error fetching blog contents:",a),k("Failed to load blog contents")}finally{h(!1)}},p=async a=>{if(confirm("Are you sure you want to delete this blog content?"))try{if(!(await fetch(`/api/blog-content/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete blog content");f(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Error deleting blog content:",a),alert("Failed to delete blog content")}};return m||n?g?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading blog contents..."})]})}):j?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:j}),(0,b.jsx)("button",{onClick:o,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Again"})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Blog Content"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage your blog content with rich text editing"})]}),(0,b.jsxs)(d.default,{href:"/admin/blog-contents/create",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Content"]})]})})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===a.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No blog content"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first blog content."}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsxs)(d.default,{href:"/admin/blog-contents/create",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Content"]})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,b.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,b.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,b.jsxs)("dl",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Blog Contents"}),(0,b.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:a.length})]})})]})})})}),(0,b.jsx)(i,{blogContents:a,onDelete:p,canEdit:a=>n||a.createdBy.id===l?.id})]})})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to view blog content."}),(0,b.jsx)(d.default,{href:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go Home"})]})})}}];

//# sourceMappingURL=src_app_admin_blog-contents_page_tsx_bf8805cb._.js.map