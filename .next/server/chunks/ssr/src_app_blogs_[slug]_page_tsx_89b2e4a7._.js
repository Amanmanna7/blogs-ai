module.exports=[83194,a=>{"use strict";a.s(["default",()=>n],83194);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(35231),f=a.i(38246),g=a.i(73644),h=a.i(49863);function i({code:a,language:d="text"}){let[e,f]=(0,c.useState)(!1),g=async()=>{try{await navigator.clipboard.writeText(a),f(!0),setTimeout(()=>f(!1),2e3)}catch(a){console.error("Failed to copy text: ",a)}};return(0,b.jsxs)("div",{className:"relative group my-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gray-800 px-4 py-2 rounded-t-lg",children:[(0,b.jsx)("span",{className:"text-xs text-gray-300 uppercase font-medium",children:d}),(0,b.jsx)("button",{onClick:g,className:"cursor-pointer flex items-center gap-1 text-xs text-gray-300 hover:text-white transition-colors",children:e?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})})]}),(0,b.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-b-lg overflow-x-auto text-sm font-mono leading-relaxed",children:(0,b.jsx)("code",{children:a})})]})}function j({prompt:a="You are a helpful AI assistant. Please provide clear, accurate, and helpful responses to user questions.",placeholder:d="Ask me anything...",className:e="",blogTitle:f="this content",isChatOpen:g=!1,onChatToggle:j,blogId:k,courseId:l,chapterTopicId:m}){let{isSignedIn:n}=(0,h.useUser)(),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(!1),W=(0,c.useRef)(null),X=(0,c.useRef)(null),Y=(0,c.useRef)(null),Z=(0,c.useRef)(null);(0,c.useEffect)(()=>{n&&g&&(ab(),_())},[n,g,k,l,m]),(0,c.useEffect)(()=>{n&&g&&0===o.length&&!C&&p([{id:"welcome",role:"assistant",content:`ðŸ‘‹ Hello! I'm your AI learning assistant. I'm here to help you understand "${f}" better. Feel free to ask me any questions about the concepts, explanations, or if you need clarification on any topic covered in this lesson. How can I assist you today?`,timestamp:new Date}])},[n,g,f,o.length,C]),(0,c.useEffect)(()=>{if(g&&Z.current){let a=setTimeout(()=>{Z.current?.focus()},200);return()=>clearTimeout(a)}},[g]);let $=()=>{Y.current&&Y.current.scrollTo({top:Y.current.scrollHeight,behavior:"smooth"})},_=async()=>{if(n)try{let a=await fetch("/api/user-plans/check-limits?feature=ai-chat");if(a.ok){let b=await a.json();T(b.hasActivePlan),P(b.messageLimit),R(b.remainingMessages),V(0===b.remainingMessages&&!b.hasActivePlan)}}catch(a){console.error("Error checking message limits:",a)}};(0,c.useEffect)(()=>{if(!C&&o.length>0){let a=o[o.length-1];!I&&("user"===a.role?setTimeout(()=>$(),50):"assistant"===a.role&&a.id!==M&&K&&(setTimeout(()=>(()=>{if(Y.current){let a=Y.current,b=a.querySelectorAll('[data-role="assistant"]');if(b.length>0){let c=b[b.length-1].offsetTop-a.offsetTop;a.scrollTo({top:c,behavior:"smooth"})}}})(),100),N(a.id)))}},[o,C,I,M,K]);let aa=async b=>{if(b&&b.preventDefault(),!q.trim()||s||U)return;let c={id:Date.now().toString(),role:"user",content:q.trim(),timestamp:new Date};p(a=>[...a,c]),r(""),Z.current&&(Z.current.style.height="48px"),t(!0);try{let b=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...o,c].map(a=>({role:a.role,content:a.content})),systemPrompt:a,sessionId:y,blogId:k,courseId:l,chapterTopicId:m,isFirstMessage:A,featureSlug:"ai-chat"})});if(!b.ok){let a=await b.json();if("MESSAGE_LIMIT_EXCEEDED"===a.error){V(!0),R(0);let a={id:(Date.now()+1).toString(),role:"assistant",content:"You have reached your message limit. Please upgrade to continue chatting.",timestamp:new Date};p(b=>[...b,a]);return}throw Error("Failed to get AI response")}let d=await b.json();A&&d.sessionId&&(z(d.sessionId),B(!1));let e={id:(Date.now()+1).toString(),role:"assistant",content:d.response,timestamp:new Date};p(a=>[...a,e]),null!==Q&&Q>0&&R(a=>null!==a?a-1:null)}catch(b){console.error("Error getting AI response:",b);let a={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};p(b=>[...b,a])}finally{t(!1)}},ab=async()=>{if(n&&g&&!C){D(!0);try{let a=new URLSearchParams;k&&a.append("blogId",k),l&&a.append("courseId",l),m&&a.append("chapterTopicId",m);let b=await fetch(`/api/chat-sessions?${a}`);if(b.ok){let a=await b.json();if(a.success&&a.sessions&&a.sessions.length>0){let b=a.sessions[0];z(b.id),B(!1);let c=b.messages.map(a=>({id:a.id,role:"USER"===a.sender?"user":"assistant",content:a.message,timestamp:new Date(a.createdAt)}));if(p(c),L(!0),c.length>0){let a=c[c.length-1];"assistant"===a.role&&N(a.id)}setTimeout(()=>$(),50)}}}catch(a){console.error("Error loading chat history:",a)}finally{D(!1)}}},ac=async()=>{if(y&&!G&&E){H(!0);try{let a=new URLSearchParams({sessionId:y,limit:"20",offset:o.length.toString()}),b=await fetch(`/api/chat-history?${a}`);if(b.ok){let a=await b.json();if(a.success&&a.messages.length>0){let b=a.messages.map(a=>({id:a.id,role:"USER"===a.sender?"user":"assistant",content:a.message,timestamp:new Date(a.createdAt)}));p(a=>[...b,...a]),F(a.hasMore)}else F(!1)}}catch(a){console.error("Error loading older messages:",a)}finally{H(!1)}}};return n?g?(0,b.jsxs)("div",{className:`bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl shadow-xl border-2 border-blue-200 flex flex-col ${e}`,style:{height:"85vh"},children:[(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:(0,b.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"AI Learning Assistant"})]}),(0,b.jsx)("button",{onClick:()=>{j?.(!1)},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100 cursor-pointer",title:"Close chat",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-3",children:f}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:o.length>0?`${o.length} message${1!==o.length?"s":""}`:"Ready to help with your learning"}),null!==O&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:null!==Q?S?(0,b.jsx)("span",{className:"text-green-600",children:-1===O?"Unlimited messages":`${Q} of ${O} messages remaining`}):Q>0?(0,b.jsxs)("span",{className:"text-blue-600",children:[Q," of ",O," messages remaining"]}):(0,b.jsx)("span",{className:"text-red-600",children:"Message limit reached"}):(0,b.jsx)("span",{className:"text-gray-500",children:"Loading limits..."})})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-400 animate-pulse"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Active"})]})})]})]}),(0,b.jsxs)("div",{className:"border-t border-gray-200 flex flex-col flex-1 min-h-0",children:[(0,b.jsxs)("div",{ref:Y,className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 scroll-smooth",onScroll:a=>{let{scrollTop:b,scrollHeight:c,clientHeight:d}=a.currentTarget;J(!(b+d>=c-10)),0===b&&E&&!G&&ac()},children:[G&&(0,b.jsx)("div",{className:"flex justify-center py-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,b.jsx)("div",{className:"h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),"Loading older messages..."]})}),C&&(0,b.jsx)("div",{className:"flex justify-center py-8",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,b.jsx)("div",{className:"h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),"Loading chat history..."]})}),!E&&o.length>0&&(0,b.jsx)("div",{className:"flex justify-center py-2",children:(0,b.jsx)("div",{className:"text-xs text-gray-400",children:"No more messages"})}),0!==o.length||C?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{ref:X}),o.map(a=>(0,b.jsx)("div",{"data-role":a.role,className:`flex ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${"user"===a.role?"bg-blue-600 text-white ml-8":"bg-gray-100 text-gray-900 mr-8"}`,children:[(0,b.jsx)("div",{className:"text-sm prose prose-sm max-w-none",children:a.content.split(/(```[\w]*\n[\s\S]*?```)/g).map((a,c)=>{if(a.startsWith("```")){let d=a.match(/```(\w+)?\n([\s\S]*?)```/);if(d){let a=d[1]||"text",e=d[2].trim();return(0,b.jsx)(i,{code:e,language:a},c)}}return(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:a.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-gray-900">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic text-gray-700">$1</em>').replace(/`([^`]+)`/g,'<code class="bg-gray-100 px-1 py-0.5 rounded text-sm font-mono text-gray-800">$1</code>')}},c)})}),(0,b.jsx)("p",{className:`text-xs mt-1 ${"user"===a.role?"text-blue-100":"text-gray-500"}`,children:a.timestamp.toLocaleTimeString()})]})},a.id))]}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"h-12 w-12 mx-auto mb-4 rounded-full bg-gradient-to-r from-blue-100 to-purple-100 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"Start a conversation with AI"})]}),s&&(0,b.jsx)("div",{className:"flex justify-start",children:(0,b.jsx)("div",{className:"bg-gray-100 text-gray-900 max-w-xs lg:max-w-md px-4 py-2 rounded-lg mr-8",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"flex space-x-1",children:[(0,b.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce"}),(0,b.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,b.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"AI is thinking..."})]})})}),(0,b.jsx)("div",{ref:W})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 p-4 mt-auto",children:U?(0,b.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-6 text-center",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"h-8 w-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Message Limit Reached"}),(0,b.jsxs)("p",{className:"text-gray-600 text-sm mb-4",children:["You've used all ",O," free messages. Upgrade to continue chatting with unlimited AI support."]})]}),(0,b.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Unlimited AI conversations"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Priority AI responses"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Advanced AI features"})]})]}),(0,b.jsxs)("a",{href:"/profile?tab=subscription",className:"cursor-pointer w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-semibold py-3 px-6 rounded-lg hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 flex items-center justify-center gap-2",children:[(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Upgrade to Premium"]})]}):(0,b.jsxs)("form",{onSubmit:aa,className:"flex gap-3",children:[(0,b.jsx)("div",{className:"flex-1 relative",children:(0,b.jsx)("textarea",{ref:Z,value:q,onChange:a=>r(a.target.value),onKeyPress:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),aa())},placeholder:d,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200",rows:1,style:{minHeight:"48px",maxHeight:"120px"},onInput:a=>{let b=a.target;b.style.height="auto",b.style.height=`${Math.min(b.scrollHeight,120)}px`},disabled:s})}),(0,b.jsx)("button",{type:"submit",disabled:!q.trim()||s,className:`cursor-pointer px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 font-semibold shadow-lg hover:shadow-xl ${q.trim()?"hover:scale-105":""}`,style:{minWidth:q.trim()?"auto":"48px",width:q.trim()?"auto":"48px",height:"48px"},children:s?(0,b.jsx)("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]}):(0,b.jsx)("div",{className:`bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl shadow-xl border-2 border-blue-200 ${e}`,children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:(0,b.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"AI Learning Assistant"})]}),(0,b.jsxs)("p",{className:"text-gray-600 text-sm mb-6",children:['Get personalized help understanding "',f,'" with our AI tutor.']}),(0,b.jsxs)("button",{onClick:()=>{j?.(!0),window.scrollTo({top:0,behavior:"smooth"})},className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center justify-center gap-2 mb-4 cursor-pointer",children:[(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Begin AI Learning"]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>x(!w),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1 mb-3 cursor-pointer",children:[w?"Show less":"What will it help with?",(0,b.jsx)("svg",{className:`h-4 w-4 transition-transform duration-200 ${w?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),w&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Instant doubt resolution"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Personalized explanations"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"24/7 learning support"})]})]})]})]})}):(0,b.jsxs)("div",{className:`bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl shadow-xl border-2 border-yellow-200 ${e}`,children:[(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center shadow-lg",children:(0,b.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"AI Premium Learning"})]})}),(0,b.jsxs)("div",{className:"border-t border-gray-200 p-6 text-center",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"h-8 w-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unlock AI Premium Learning For"}),(0,b.jsx)("h4",{className:"text-lg font-bold text-yellow-900 mb-2",children:f}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Get instant answers, explanations, and personalized learning assistance with our AI tutor."})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Instant doubt resolution"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Personalized explanations"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"24/7 learning support"})]})]}),(0,b.jsxs)("a",{href:"/profile?tab=subscription",className:"cursor-pointer mt-6 w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-semibold py-3 px-6 rounded-lg hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 flex items-center justify-center gap-2",children:[(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Upgrade to AI Premium"]})]})]})}function k({blogId:a,chapterTopicId:d,courseId:e,blogSlug:g}){let{isSignedIn:i,user:j}=(0,h.useUser)(),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!0);(0,c.useEffect)(()=>{i&&(a||d||e||g)?s():r(!1)},[i,a,d,e,g]);let s=async()=>{try{r(!0);let b=new URLSearchParams;a&&b.append("blogId",a),d&&b.append("chapterTopicId",d),e&&b.append("courseId",e),g&&b.append("blogSlug",g);let c=await fetch(`/api/assessments?${b.toString()}`),f=await c.json();if(f.success&&f.data.length>0){let a=f.data[0];if(n(a),"COMPLETED"===a.status){let b=a.assessmentQuestions.filter(a=>a.isCorrect).length,c=Math.round(b/a.totalQuestions*100);p({score:b,percentage:c,totalQuestions:a.totalQuestions})}}}catch(a){console.error("Error fetching assessment data:",a)}finally{r(!1)}};return i?q?(0,b.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-xl border-2 border-blue-200/60 p-6",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"h-5 bg-gray-300 rounded w-24 mb-2"}),(0,b.jsx)("div",{className:"h-4 bg-gray-300 rounded w-32"})]})]}),(0,b.jsx)("div",{className:"h-12 bg-gray-300 rounded-lg"})]})}):(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-xl border-2 border-blue-200/60 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:"AI Quiz"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:m?.status==="COMPLETED"?"Review your quiz performance":m?.status==="ACTIVE"?"Continue where you left off":"Test your knowledge"})]})]}),o&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-white/60 rounded-lg border border-blue-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Completed"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[o.percentage,"%"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[o.score,"/",o.totalQuestions," correct"]})]})]})}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,b.jsx)("span",{children:"AI-Generated"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,b.jsx)("span",{children:"Instant Feedback"})]})]}),(0,b.jsxs)(f.default,{href:m?.status==="COMPLETED"?`/blogs/${g}/assessment/results`:m?.status==="ACTIVE"?`/blogs/${g}/assessment`:`/quiz?${new URLSearchParams({...a&&{blogId:a},...d&&{chapterTopicId:d},...e&&{courseId:e},...g&&{slug:g}}).toString()}`,className:"group block w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white text-center py-3 rounded-lg font-bold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 relative overflow-hidden shadow-lg",children:[(0,b.jsxs)("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[(0,b.jsx)("span",{children:m?.status==="COMPLETED"?"View Results":m?.status==="ACTIVE"?"Resume Quiz":"Start Quiz"}),(0,b.jsx)("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out"})]})]}):(0,b.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl shadow-xl border-2 border-yellow-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:"AI Quiz"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Unlock personalized learning"})]})]}),(0,b.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3 h-3 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"AI-Generated"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3 h-3 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Instant Feedback"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3 h-3 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Progress Track"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3 h-3 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Customizable"})]})]}),(0,b.jsxs)(f.default,{href:"/sign-in",className:"group block w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-center py-3 rounded-lg font-bold hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 relative overflow-hidden shadow-lg",children:[(0,b.jsxs)("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,b.jsx)("span",{children:"Unlock AI Quizzes"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out"})]})]})}var l=a.i(81432);function m(){let a=(0,d.useParams)().slug,h=(0,d.useSearchParams)().get("chapter"),[i,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(null);return((0,c.useEffect)(()=>{let b=async()=>{try{q(!0);let b=await fetch(`/api/blogs/slug/${encodeURIComponent(a)}`);if(!b.ok)return void(404===b.status?s("Blog not found"):s("Failed to load blog"));let c=await b.json();o(c)}catch(a){console.error("Error fetching blog:",a),s("Failed to load blog")}finally{q(!1)}};a&&b()},[a]),(0,c.useEffect)(()=>{(async()=>{if(h)try{let a=await fetch(`/api/chapter-topics/public/${h}`);if(!a.ok)return;let b=await a.json();w(b),b.progress&&y({completedBlogs:b.progress.completedBlogs||0,totalBlogs:b.progress.totalBlogs||0,progressPercentage:b.progress.progressPercentage||0}),b.isUserSignedIn&&m(!0)}catch(a){console.error("Failed to fetch chapter lessons",a)}})()},[h]),(0,c.useEffect)(()=>{(async()=>{if(n&&h)try{await fetch("/api/progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blogId:n.id,chapterId:h})})}catch(a){console.error("Failed to track progress:",a)}})()},[n,h]),p)?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading blog..."})]})}):r||!n||"PUBLISHED"!==n.status?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“"}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:r||"Blog not found"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"The blog you're looking for doesn't exist or has been removed."}),(0,b.jsx)(f.default,{href:"/blogs",className:"inline-flex items-center px-4 pt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"â† Back to Blogs"})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30",children:[(0,b.jsx)(g.default,{}),!h&&(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,b.jsx)(f.default,{href:"/blogs",className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"â† Back to Blogs"})}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:`grid gap-8 ${t?"grid-cols-1 lg:grid-cols-2":"grid-cols-1 lg:grid-cols-3"}`,children:[(0,b.jsxs)("div",{className:`${t?"lg:col-span-1":"lg:col-span-2"}`,children:[(0,b.jsx)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:(0,b.jsx)(e.default,{title:n.title,tags:n.tags,categories:n.categories.map(a=>a.category),sequences:n.sequences})}),v&&(()=>{let c=v.blogs.findIndex(b=>b.slug===a),d=c>=0?v.blogs[c+1]:null;return d?(0,b.jsxs)("div",{className:"mt-8 relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-700 p-4 sm:p-6 lg:p-8 shadow-xl",children:[(0,b.jsx)("div",{className:"absolute -top-4 -right-4 h-16 w-16 sm:h-20 sm:w-20 lg:h-24 lg:w-24 rounded-full bg-white/10"}),(0,b.jsx)("div",{className:"absolute -bottom-2 -left-2 h-12 w-12 sm:h-14 sm:w-14 lg:h-16 lg:w-16 rounded-full bg-white/5"}),(0,b.jsxs)("div",{className:"relative flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6",children:[(0,b.jsxs)("div",{className:"flex-1 text-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-400 animate-pulse"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm font-medium text-blue-100",children:"Continue Learning"})]}),(0,b.jsx)("h4",{className:"text-lg sm:text-xl font-bold text-white mb-2 line-clamp-2",children:d.title}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs sm:text-sm text-blue-100",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"h-3 w-3 sm:h-4 sm:w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.206 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.794 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.794 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.206 18 16.5 18s-3.332.477-4.5 1.253m0-13C13.168 5.477 14.794 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.206 18 16.5 18s-3.332.477-4.5 1.253"})}),"Lesson ",c+2," of ",v.blogs.length]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"h-3 w-3 sm:h-4 sm:w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Next up"]})]})]}),(0,b.jsxs)(f.default,{href:`/blogs/${d.slug}?chapter=${h}`,className:"group relative overflow-hidden inline-flex items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 sm:px-6 sm:py-3 text-blue-700 font-semibold text-sm sm:text-base hover:bg-blue-50 hover:shadow-xl transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/50 w-full sm:w-auto",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out"}),(0,b.jsx)("span",{className:"relative z-10",children:"Next Lesson"}),(0,b.jsx)("svg",{className:"relative z-10 h-4 w-4 sm:h-5 sm:w-5 group-hover:translate-x-0.5 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}):null})()]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:t?(0,b.jsx)(j,{prompt:`You are an AI learning assistant helping users understand the blog content: "${n?.title}". 
                You can answer questions about the topic, provide explanations, clarify concepts, and help with learning. 
                Be helpful, accurate, and encourage learning.`,placeholder:"Ask me about this lesson...",blogTitle:n?.title||"this content",isChatOpen:t,onChatToggle:u,blogId:n?.id,chapterTopicId:h||void 0,className:"h-full"}):(0,b.jsxs)("div",{className:"space-y-6",children:[h&&(0,b.jsx)(k,{blogId:n.id,chapterTopicId:h,blogSlug:n.slug}),(0,b.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Blog Details"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Published"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:new Date(n.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Last Updated"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:new Date(n.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]}),v&&(0,b.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Other lessons in this chapter"}),(0,b.jsx)("div",{className:"space-y-2",children:v.blogs.map((c,d)=>{let e=c.slug===a;return(0,b.jsxs)(f.default,{href:`/blogs/${c.slug}?chapter=${h}`,className:`flex items-center justify-between rounded-lg border p-3 transition-colors ${e?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`h-7 w-7 rounded-full flex items-center justify-center text-xs font-semibold ${e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:d+1}),(0,b.jsx)("span",{className:"text-sm font-medium truncate max-w-[220px]",children:c.title})]}),(0,b.jsx)("svg",{className:`h-4 w-4 ${e?"text-blue-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},c.id)})})]}),(0,b.jsx)(j,{prompt:`You are an AI learning assistant helping users understand the blog content: "${n?.title}". 
                  You can answer questions about the topic, provide explanations, clarify concepts, and help with learning. 
                  Be helpful, accurate, and encourage learning.`,placeholder:"Ask me about this lesson...",blogTitle:n?.title||"this content",isChatOpen:t,onChatToggle:u,className:"mt-6"}),v&&!i&&(0,b.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl shadow-2xl p-8 transform hover:scale-[1.02] transition-all duration-300",children:[(0,b.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-white/20 to-transparent"}),(0,b.jsx)("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full"}),(0,b.jsx)("div",{className:"absolute -bottom-4 -left-4 w-32 h-32 bg-white/5 rounded-full"})]}),(0,b.jsxs)("div",{className:"relative z-10 text-center",children:[(0,b.jsx)("div",{className:"mx-auto w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,b.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-white mb-3",children:"Unlock Your Learning Journey"}),(0,b.jsx)("p",{className:"text-blue-100 mb-8 text-lg leading-relaxed max-w-md mx-auto",children:"Sign in to track your progress, save your journey, and get personalized AI support for this chapter."}),(0,b.jsxs)(f.default,{href:`/sign-in?redirect_url=${encodeURIComponent(window.location.href)}`,className:"inline-flex items-center justify-center px-8 py-4 bg-white text-blue-700 text-lg font-semibold rounded-xl hover:bg-blue-50 hover:shadow-xl transform hover:scale-105 transition-all duration-300 shadow-lg",children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In to Continue"]}),(0,b.jsxs)("div",{className:"mt-8 flex flex-wrap justify-center gap-6 text-sm text-blue-200",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,b.jsx)("span",{children:"Track Progress"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,b.jsx)("span",{children:"Save Journey"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,b.jsx)("span",{children:"AI Support"})]})]})]})]}),v&&i&&x?(0,b.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Chapter Progress"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:(0,b.jsxs)("span",{children:["Chapter: ",v.name]})}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${x.progressPercentage}%`}})}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,b.jsxs)("span",{children:[x.completedBlogs,"/",x.totalBlogs," Lessons Completed"]}),(0,b.jsxs)("span",{children:[x.progressPercentage,"% Complete"]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Learning in Progress"})]}),100===x.progressPercentage&&(0,b.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Chapter Completed!"})]})]})]}):v&&i&&!x?(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-red-800",children:"Progress Not Available"}),(0,b.jsx)("p",{className:"text-sm text-red-700",children:"Chapter data is available but chapter progress could not be loaded."})]}):null,(0,b.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Author"}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:n.author.imageUrl?(0,b.jsx)("img",{src:n.author.imageUrl,alt:n.author.name,className:"w-12 h-12 rounded-full object-cover"}):(0,b.jsx)("span",{className:"text-blue-600 font-semibold text-lg",children:n.author.name.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900",children:n.author.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:n.author.email})]})]})]}),n.tags.length>0&&(0,b.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:n.tags.map((a,c)=>(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:a},c))})]}),n.categories.length>0&&(0,b.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Categories"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:n.categories.map(a=>(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:a.category.name},a.category.id))})]})]})})]})}),(0,b.jsx)(l.default,{})]})}function n(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,b.jsx)(m,{})})}}];

//# sourceMappingURL=src_app_blogs_%5Bslug%5D_page_tsx_89b2e4a7._.js.map