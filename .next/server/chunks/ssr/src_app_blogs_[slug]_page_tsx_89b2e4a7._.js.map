{"version":3,"sources":["turbopack:///[project]/src/app/blogs/[slug]/page.tsx","turbopack:///[project]/src/components/AIChat.tsx","turbopack:///[project]/src/components/QuizButton.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, Suspense } from 'react';\nimport { useParams, useSearchParams } from 'next/navigation';\nimport BlogPreview from '@/components/BlogPreview';\nimport Link from 'next/link';\nimport ScrollToTop from '@/components/ScrollToTop';\nimport AIChat from '@/components/AIChat';\nimport QuizButton from '@/components/QuizButton';\nimport NotesManager from '@/components/NotesManager';\n\ninterface Category {\n  id: string;\n  name: string;\n}\n\ninterface BlogContent {\n  id: string;\n  name: string;\n  textContent: string;\n}\n\ninterface BlogMedia {\n  id: string;\n  name: string;\n  mediaUrl: string;\n  mediaType: string;\n}\n\ninterface BlogSequence {\n  id: string;\n  sequence: number;\n  type: 'content' | 'media';\n  blogContentId?: string;\n  blogMediaId?: string;\n  blogContent?: BlogContent;\n  blogMedia?: BlogMedia;\n}\n\ninterface Blog {\n  id: string;\n  title: string;\n  slug: string;\n  tags: string[];\n  readingTime: number;\n  status: string;\n  createdAt: string;\n  updatedAt: string;\n  author: {\n    id: string;\n    name: string;\n    email: string;\n    imageUrl: string;\n  };\n  categories: {\n    category: Category;\n  }[];\n  sequences: BlogSequence[];\n}\n\nfunction BlogContent() {\n  const params = useParams();\n  const slug = params.slug as string;\n  const searchParams = useSearchParams();\n  const chapterId = searchParams.get('chapter');\n\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  const [blog, setBlog] = useState<Blog | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isChatOpen, setIsChatOpen] = useState(false);\n  const [chapterLessons, setChapterLessons] = useState<{\n    id: string;\n    name: string;\n    description: string;\n    blogs: { id: string; slug: string; title: string; sequence: number; publishedAt: string | null }[];\n  } | null>(null);\n  const [chapterProgress, setChapterProgress] = useState<{\n    completedBlogs: number;\n    totalBlogs: number;\n    progressPercentage: number;\n  } | null>(null);\n\n  useEffect(() => {\n    const fetchBlog = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`/api/blogs/slug/${encodeURIComponent(slug)}`);\n        \n        if (!response.ok) {\n          if (response.status === 404) {\n            setError('Blog not found');\n          } else {\n            setError('Failed to load blog');\n          }\n          return;\n        }\n        \n        const data = await response.json();\n        setBlog(data);\n      } catch (err) {\n        console.error('Error fetching blog:', err);\n        setError('Failed to load blog');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (slug) {\n      fetchBlog();\n    }\n  }, [slug]);\n\n  // Fetch chapter lessons if chapter is present\n  useEffect(() => {\n    const fetchChapter = async () => {\n      if (!chapterId) return;\n      try {\n        const res = await fetch(`/api/chapter-topics/public/${chapterId}`);\n        if (!res.ok) return;\n        const data = await res.json();\n        setChapterLessons(data);\n        \n        // Fetch chapter progress if we have chapter data\n        if (data.progress) {\n          setChapterProgress({\n            completedBlogs: data.progress.completedBlogs || 0,\n            totalBlogs: data.progress.totalBlogs || 0,\n            progressPercentage: data.progress.progressPercentage || 0\n          });\n        }\n        if(data.isUserSignedIn){\n          setIsSignedIn(true);\n        }\n      } catch (e) {\n        console.error('Failed to fetch chapter lessons', e);\n      }\n    };\n    fetchChapter();\n  }, [chapterId]);\n\n  // Track progress when user visits blog from course\n  useEffect(() => {\n    const trackProgress = async () => {\n      if (!blog || !chapterId) return;\n      \n      try {\n        await fetch('/api/progress', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            blogId: blog.id,\n            chapterId: chapterId\n          })\n        });\n      } catch (error) {\n        console.error('Failed to track progress:', error);\n      }\n    };\n\n    trackProgress();\n  }, [blog, chapterId]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading blog...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !blog || blog.status !== 'PUBLISHED') {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">üìù</div>\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            {error || 'Blog not found'}\n          </h1>\n          <p className=\"text-gray-600 mb-6\">\n            The blog you're looking for doesn't exist or has been removed.\n          </p>\n          <Link \n            href=\"/blogs\"\n            className=\"inline-flex items-center px-4 pt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            ‚Üê Back to Blogs\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30\">\n      <ScrollToTop />\n      {/* Header - only show back button if not in chapter context */}\n      {!chapterId && (\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <Link \n            href=\"/blogs\"\n            className=\"text-gray-500 hover:text-gray-700 transition-colors duration-200\"\n          >\n            ‚Üê Back to Blogs\n          </Link>\n        </div>\n      )}\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className={`grid gap-8 ${isChatOpen ? 'grid-cols-1 lg:grid-cols-2' : 'grid-cols-1 lg:grid-cols-3'}`}>\n          {/* Left Column - Blog Content */}\n          <div className={`${isChatOpen ? 'lg:col-span-1' : 'lg:col-span-2'}`}>\n            <div className=\"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6\">\n              <BlogPreview\n                title={blog.title}\n                tags={blog.tags}\n                categories={blog.categories.map(c => c.category)}\n                sequences={blog.sequences}\n              />\n              \n              {/* AI Chat CTA - Only show when chat is closed */}\n              {!isChatOpen && (\n                <div className=\"mt-6 relative overflow-hidden rounded-xl bg-gradient-to-br from-blue-50 via-blue-100 to-blue-200 border border-blue-200 p-4\">\n                  {/* Decorative background elements */}\n                  <div className=\"absolute -top-4 -right-4 h-16 w-16 rounded-full bg-blue-200/20 blur-xl\"></div>\n                  <div className=\"absolute -bottom-3 -left-3 h-12 w-12 rounded-full bg-blue-300/15 blur-lg\"></div>\n                  \n                  <div className=\"relative flex flex-col sm:flex-row sm:items-center gap-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <div className=\"h-8 w-8 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center shadow-md flex-shrink-0\">\n                          <svg className=\"h-4 w-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                          </svg>\n                        </div>\n                        <div>\n                          <h3 className=\"text-base font-semibold text-gray-900\">\n                            Have any doubt or need detailed explanation?\n                          </h3>\n                          <p className=\"text-xs text-gray-600 mt-0.5\">\n                            Get instant answers from our AI learning assistant\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <button\n                      onClick={() => setIsChatOpen(true)}\n                      className=\"group relative overflow-hidden inline-flex items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-2.5 text-white font-medium text-sm hover:from-blue-700 hover:to-blue-800 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md w-full sm:w-auto flex-shrink-0 cursor-pointer\"\n                    >\n                      {/* Shimmer effect */}\n                      <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out\"></div>\n                      \n                      <svg className=\"relative z-10 h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                      </svg>\n                      <span className=\"relative z-10\">Chat with AI</span>\n                      <svg className=\"relative z-10 h-3 w-3 group-hover:translate-x-0.5 transition-transform duration-200\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n\n\n            {/* Next Lesson CTA (only when chapter present and lesson exists) */}\n            {chapterLessons && (() => {\n              const currentIndex = chapterLessons.blogs.findIndex(b => b.slug === slug);\n              const next = currentIndex >= 0 ? chapterLessons.blogs[currentIndex + 1] : null;\n              return next ? (\n                <div className=\"mt-8 relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-700 p-4 sm:p-6 lg:p-8 shadow-xl\">\n                  {/* Decorative background elements */}\n                  <div className=\"absolute -top-4 -right-4 h-16 w-16 sm:h-20 sm:w-20 lg:h-24 lg:w-24 rounded-full bg-white/10\"></div>\n                  <div className=\"absolute -bottom-2 -left-2 h-12 w-12 sm:h-14 sm:w-14 lg:h-16 lg:w-16 rounded-full bg-white/5\"></div>\n                  \n                  <div className=\"relative flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6\">\n                    <div className=\"flex-1 text-white\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <div className=\"h-2 w-2 rounded-full bg-green-400 animate-pulse\"></div>\n                        <p className=\"text-xs sm:text-sm font-medium text-blue-100\">Continue Learning</p>\n                      </div>\n                      <h4 className=\"text-lg sm:text-xl font-bold text-white mb-2 line-clamp-2\">\n                        {next.title}\n                      </h4>\n                      <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs sm:text-sm text-blue-100\">\n                        <span className=\"flex items-center gap-1\">\n                          <svg className=\"h-3 w-3 sm:h-4 sm:w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.206 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.794 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.794 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.206 18 16.5 18s-3.332.477-4.5 1.253m0-13C13.168 5.477 14.794 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.206 18 16.5 18s-3.332.477-4.5 1.253\" />\n                          </svg>\n                          Lesson {currentIndex + 2} of {chapterLessons.blogs.length}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <svg className=\"h-3 w-3 sm:h-4 sm:w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                          Next up\n                        </span>\n                      </div>\n                    </div>\n                    <Link\n                      href={`/blogs/${next.slug}?chapter=${chapterId}`}\n                      className=\"group relative overflow-hidden inline-flex items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 sm:px-6 sm:py-3 text-blue-700 font-semibold text-sm sm:text-base hover:bg-blue-50 hover:shadow-xl transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/50 w-full sm:w-auto\"\n                    >\n                      {/* Shimmer effect */}\n                      <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out\"></div>\n                      \n                      <span className=\"relative z-10\">Next Lesson</span>\n                      <svg className=\"relative z-10 h-4 w-4 sm:h-5 sm:w-5 group-hover:translate-x-0.5 transition-transform duration-200\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n                      </svg>\n                    </Link>\n                  </div>\n                </div>\n              ) : null;\n            })()}\n\n          </div>\n\n          {/* Right Column - Blog Information or Chat */}\n          <div className={`${isChatOpen ? 'lg:col-span-1' : 'lg:col-span-1'}`}>\n            {isChatOpen ? (\n              /* AI Chat when open */\n              <AIChat \n                prompt={`You are an AI learning assistant helping users understand the blog content: \"${blog?.title}\". \n                You can answer questions about the topic, provide explanations, clarify concepts, and help with learning. \n                Be helpful, accurate, and encourage learning.`}\n                placeholder=\"Ask me about this lesson...\"\n                blogTitle={blog?.title || \"this content\"}\n                isChatOpen={isChatOpen}\n                onChatToggle={setIsChatOpen}\n                blogId={blog?.id}\n                chapterTopicId={chapterId || undefined}\n                className=\"h-full\"\n              />\n            ) : (\n              /* Blog Information when chat is closed */\n              <div className=\"space-y-6\">\n                {/* AI Chat Assistant - First */}\n                <AIChat \n                  prompt={`You are an AI learning assistant helping users understand the blog content: \"${blog?.title}\". \n                  You can answer questions about the topic, provide explanations, clarify concepts, and help with learning. \n                  Be helpful, accurate, and encourage learning.`}\n                  placeholder=\"Ask me about this lesson...\"\n                  blogTitle={blog?.title || \"this content\"}\n                  isChatOpen={isChatOpen}\n                  onChatToggle={setIsChatOpen}\n                  blogId={blog?.id}\n                  chapterTopicId={chapterId || undefined}\n                />\n\n                {/* Chapter Progress (only when chapter present and user is signed in) - Second */}\n                {chapterLessons && isSignedIn && chapterProgress ? (\n                  <div className=\"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Chapter Progress</h3>\n                    <div className=\"mb-4\">\n                      <div className=\"flex justify-between text-sm text-gray-600 mb-2\">\n                        <span>Chapter: {chapterLessons.name}</span>\n                      </div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\n                        <div \n                          className=\"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300\"\n                          style={{ width: `${chapterProgress.progressPercentage}%` }}\n                        ></div>\n                      </div>\n                      <div className=\"flex justify-between text-xs text-gray-500\">\n                        <span>{chapterProgress.completedBlogs}/{chapterProgress.totalBlogs} Lessons Completed</span>\n                        <span>{chapterProgress.progressPercentage}% Complete</span>\n                      </div>\n                    </div>\n                    \n                    {/* Progress Status */}\n                    <div className=\"mt-4 flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-2\">\n                        <div className=\"h-2 w-2 rounded-full bg-blue-500\"></div>\n                        <span className=\"text-sm text-gray-600\">Learning in Progress</span>\n                      </div>\n                      {chapterProgress.progressPercentage === 100 && (\n                        <div className=\"flex items-center space-x-1 text-green-600\">\n                          <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                          </svg>\n                          <span className=\"text-sm font-medium\">Chapter Completed!</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                ) : chapterLessons && isSignedIn && !chapterProgress ? (\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-4\">\n                    <h4 className=\"font-semibold text-red-800\">Progress Not Available</h4>\n                    <p className=\"text-sm text-red-700\">Chapter data is available but chapter progress could not be loaded.</p>\n                  </div>\n                ) : null}\n\n                {/* Quiz Button - only show when chapter is present - Third */}\n                {chapterId && (\n                  <QuizButton\n                    blogId={blog.id}\n                    chapterTopicId={chapterId}\n                    blogSlug={blog.slug}\n                  />\n                )}\n\n                {/* Chapter Lessons Sidebar (only when chapter present) - Fourth */}\n                {chapterLessons && (\n                  <div className=\"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Other lessons in this chapter</h3>\n                    <div className=\"space-y-2\">\n                      {chapterLessons.blogs.map((b, idx) => {\n                        const isActive = b.slug === slug;\n                        return (\n                          <Link\n                            key={b.id}\n                            href={`/blogs/${b.slug}?chapter=${chapterId}`}\n                            className={`flex items-center justify-between rounded-lg border p-3 transition-colors ${\n                              isActive ? 'bg-blue-50 border-blue-300 text-blue-700' : 'bg-white border-gray-200 hover:bg-gray-50'\n                            }`}\n                          >\n                            <div className=\"flex items-center gap-3\">\n                              <div className={`h-7 w-7 rounded-full flex items-center justify-center text-xs font-semibold ${\n                                isActive ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'\n                              }`}>\n                                {idx + 1}\n                              </div>\n                              <span className=\"text-sm font-medium truncate max-w-[220px]\">{b.title}</span>\n                            </div>\n                            <svg className={`h-4 w-4 ${isActive ? 'text-blue-600' : 'text-gray-400'}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                            </svg>\n                          </Link>\n                        );\n                      })}\n                    </div>\n                  </div>\n                )}\n\n                {/* Author Card - Fifth */}\n                <div className=\"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Author</h3>\n                  \n                  <div className=\"flex items-center\">\n                    <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4\">\n                      {blog.author.imageUrl ? (\n                        <img \n                          src={blog.author.imageUrl} \n                          alt={blog.author.name}\n                          className=\"w-12 h-12 rounded-full object-cover\"\n                        />\n                      ) : (\n                        <span className=\"text-blue-600 font-semibold text-lg\">\n                          {blog.author.name.charAt(0).toUpperCase()}\n                        </span>\n                      )}\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900\">{blog.author.name}</h4>\n                      <p className=\"text-sm text-gray-600\">{blog.author.email}</p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Blog Details Card - Sixth */}\n                <div className=\"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Blog Details</h3>\n                  \n                  <div className=\"space-y-4\">\n                    {/* Published Date */}\n                    <div className=\"flex items-center\">\n                      <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3\">\n                        <svg className=\"w-4 h-4 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                        </svg>\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900\">Published</p>\n                        <p className=\"text-sm text-gray-600\">{new Date(blog.createdAt).toLocaleDateString('en-US', { \n                          year: 'numeric', \n                          month: 'long', \n                          day: 'numeric' \n                        })}</p>\n                      </div>\n                    </div>\n\n                    {/* Updated Date */}\n                    <div className=\"flex items-center\">\n                      <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3\">\n                        <svg className=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                        </svg>\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900\">Last Updated</p>\n                        <p className=\"text-sm text-gray-600\">{new Date(blog.updatedAt).toLocaleDateString('en-US', { \n                          year: 'numeric', \n                          month: 'long', \n                          day: 'numeric' \n                        })}</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Tags Card - Seventh */}\n                {blog.tags.length > 0 && (\n                  <div className=\"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Tags</h3>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {blog.tags.map((tag, index) => (\n                        <span\n                          key={index}\n                          className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\"\n                        >\n                          {tag}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Categories Card - Eighth */}\n                {blog.categories.length > 0 && (\n                  <div className=\"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-blue-100/50 p-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Categories</h3>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {blog.categories.map((cat) => (\n                        <span\n                          key={cat.category.id}\n                          className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\"\n                        >\n                          {cat.category.name}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Sign In to Save Progress (only when chapter present and user not signed in) */}\n                {chapterLessons && !isSignedIn && (\n                  <div className=\"relative overflow-hidden bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl shadow-2xl p-8 transform hover:scale-[1.02] transition-all duration-300\">\n                    {/* Background Pattern */}\n                    <div className=\"absolute inset-0 opacity-10\">\n                      <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-white/20 to-transparent\"></div>\n                      <div className=\"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full\"></div>\n                      <div className=\"absolute -bottom-4 -left-4 w-32 h-32 bg-white/5 rounded-full\"></div>\n                    </div>\n                    \n                    {/* Content */}\n                    <div className=\"relative z-10 text-center\">\n                      {/* Icon */}\n                      <div className=\"mx-auto w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-6 animate-pulse\">\n                        <svg className=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                        </svg>\n                      </div>\n                      \n                      {/* Title */}\n                      <h3 className=\"text-2xl font-bold text-white mb-3\">Unlock Your Learning Journey</h3>\n                      \n                      {/* Description */}\n                      <p className=\"text-blue-100 mb-8 text-lg leading-relaxed max-w-md mx-auto\">\n                        Sign in to track your progress, save your journey, and get personalized AI support for this chapter.\n                      </p>\n                      \n                      {/* Sign In Button */}\n                      <Link\n                        href={`/sign-in?redirect_url=${encodeURIComponent(window.location.href)}`}\n                        className=\"inline-flex items-center justify-center px-8 py-4 bg-white text-blue-700 text-lg font-semibold rounded-xl hover:bg-blue-50 hover:shadow-xl transform hover:scale-105 transition-all duration-300 shadow-lg\"\n                      >\n                        <svg className=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 3 0 013-3h7a3 3 0 013 3v1\" />\n                        </svg>\n                        Sign In to Continue\n                      </Link>\n                      \n                      {/* Features */}\n                      <div className=\"mt-8 flex flex-wrap justify-center gap-6 text-sm text-blue-200\">\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n                          <span>Track Progress</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n                          <span>Save Journey</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n                          <span>AI Support</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n      \n      {/* Notes Manager */}\n      <NotesManager />\n    </div>\n  );\n}\n\nexport default function BlogPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    }>\n      <BlogContent />\n    </Suspense>\n  );\n}\n","'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { useUser } from '@clerk/nextjs';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\ninterface AIChatProps {\n  prompt?: string;\n  placeholder?: string;\n  className?: string;\n  blogTitle?: string;\n  isChatOpen?: boolean;\n  onChatToggle?: (isOpen: boolean) => void;\n  blogId?: string;\n  courseId?: string;\n  chapterTopicId?: string;\n}\n\n// Code Block Component with Copy Functionality\nfunction CodeBlock({ code, language = 'text' }: { code: string; language?: string }) {\n  const [copied, setCopied] = useState(false);\n\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(code);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      console.error('Failed to copy text: ', err);\n    }\n  };\n\n  return (\n    <div className=\"relative group my-3\">\n      <div className=\"flex items-center justify-between bg-gray-800 px-4 py-2 rounded-t-lg\">\n        <span className=\"text-xs text-gray-300 uppercase font-medium\">{language}</span>\n        <button\n          onClick={copyToClipboard}\n          className=\"cursor-pointer flex items-center gap-1 text-xs text-gray-300 hover:text-white transition-colors\"\n        >\n          {copied ? (\n            <>\n              <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n              Copied!\n            </>\n          ) : (\n            <>\n              <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n              </svg>\n              Copy\n            </>\n          )}\n        </button>\n      </div>\n      <pre className=\"bg-gray-900 text-gray-100 p-4 rounded-b-lg overflow-x-auto text-sm font-mono leading-relaxed\">\n        <code>{code}</code>\n      </pre>\n    </div>\n  );\n}\n\nexport default function AIChat({ \n  prompt = \"You are a helpful AI assistant. Please provide clear, accurate, and helpful responses to user questions.\",\n  placeholder = \"Ask me anything...\",\n  className = \"\",\n  blogTitle = \"this content\",\n  isChatOpen = false,\n  onChatToggle,\n  blogId,\n  courseId,\n  chapterTopicId\n}: AIChatProps) {\n  const { isSignedIn } = useUser();\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(true); // Auto-expand by default\n  const [showFeatures, setShowFeatures] = useState(false);\n  const [sessionId, setSessionId] = useState<string | null>(null);\n  const [isFirstMessage, setIsFirstMessage] = useState(true);\n  const [isLoadingHistory, setIsLoadingHistory] = useState(false);\n  const [hasMoreMessages, setHasMoreMessages] = useState(true);\n  const [isLoadingOlderMessages, setIsLoadingOlderMessages] = useState(false);\n  const [isUserScrolling, setIsUserScrolling] = useState(false);\n  const [hasInitiallyLoaded, setHasInitiallyLoaded] = useState(false);\n  const [lastAIMessageId, setLastAIMessageId] = useState<string | null>(null);\n  const [messageLimit, setMessageLimit] = useState<number | null>(null);\n  const [remainingMessages, setRemainingMessages] = useState<number | null>(null);\n  const [hasActivePlan, setHasActivePlan] = useState<boolean | null>(null);\n  const [isLimitExceeded, setIsLimitExceeded] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const messagesStartRef = useRef<HTMLDivElement>(null);\n  const messagesContainerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLTextAreaElement>(null);\n\n  // Load chat history and message limits when chat opens\n  useEffect(() => {\n    if (isSignedIn && isChatOpen) {\n      loadChatHistory();\n      checkMessageLimits();\n    }\n  }, [isSignedIn, isChatOpen, blogId, courseId, chapterTopicId]);\n\n  // Add welcome message if no history is found\n  useEffect(() => {\n    if (isSignedIn && isChatOpen && messages.length === 0 && !isLoadingHistory) {\n      const welcomeMessage: Message = {\n        id: 'welcome',\n        role: 'assistant',\n        content: `üëã Hello! I'm your AI learning assistant. I'm here to help you understand \"${blogTitle}\" better. Feel free to ask me any questions about the concepts, explanations, or if you need clarification on any topic covered in this lesson. How can I assist you today?`,\n        timestamp: new Date()\n      };\n      setMessages([welcomeMessage]);\n    }\n  }, [isSignedIn, isChatOpen, blogTitle, messages.length, isLoadingHistory]);\n\n  // Focus input when chat opens\n  useEffect(() => {\n    if (isChatOpen && inputRef.current) {\n      const timer = setTimeout(() => {\n        inputRef.current?.focus();\n      }, 200);\n      return () => clearTimeout(timer);\n    }\n  }, [isChatOpen]);\n\n  const scrollToBottom = () => {\n    if (messagesContainerRef.current) {\n      messagesContainerRef.current.scrollTo({\n        top: messagesContainerRef.current.scrollHeight,\n        behavior: 'smooth'\n      });\n    }\n  };\n\n  const scrollToShowAIMessage = () => {\n    if (messagesContainerRef.current) {\n      const container = messagesContainerRef.current;\n      \n      // Find the last AI message in the DOM\n      const aiMessages = container.querySelectorAll('[data-role=\"assistant\"]');\n      if (aiMessages.length > 0) {\n        const lastAIMessage = aiMessages[aiMessages.length - 1] as HTMLElement;\n        const messageTop = lastAIMessage.offsetTop - container.offsetTop;\n        \n        // Scroll to show the AI message at the top of the visible area with smooth behavior\n        container.scrollTo({\n          top: messageTop,\n          behavior: 'smooth'\n        });\n      }\n    }\n  };\n\n  // Check message limits\n  const checkMessageLimits = async () => {\n    if (!isSignedIn) return;\n\n    try {\n      const response = await fetch('/api/user-plans/check-limits?feature=ai-chat');\n      if (response.ok) {\n        const data = await response.json();\n        setHasActivePlan(data.hasActivePlan);\n        setMessageLimit(data.messageLimit);\n        setRemainingMessages(data.remainingMessages);\n        setIsLimitExceeded(data.remainingMessages === 0 && !data.hasActivePlan);\n      }\n    } catch (error) {\n      console.error('Error checking message limits:', error);\n    }\n  };\n\n  useEffect(() => {\n    // Only auto-scroll when not loading history and we have messages\n    if (!isLoadingHistory && messages.length > 0) {\n      const lastMessage = messages[messages.length - 1];\n      \n      // Only scroll if user is not actively scrolling up\n      if (!isUserScrolling) {\n        if (lastMessage.role === 'user') {\n          // For user messages, scroll to bottom\n          setTimeout(() => scrollToBottom(), 50);\n        } else if (lastMessage.role === 'assistant' && lastMessage.id !== lastAIMessageId && hasInitiallyLoaded) {\n          // For NEW AI responses only during active chat, scroll to show the beginning of the response\n          setTimeout(() => scrollToShowAIMessage(), 100);\n          setLastAIMessageId(lastMessage.id);\n        }\n      }\n    }\n  }, [messages, isLoadingHistory, isUserScrolling, lastAIMessageId, hasInitiallyLoaded]);\n\n  const handleSubmit = async (e?: React.FormEvent) => {\n    if (e) e.preventDefault();\n    if (!input.trim() || isLoading || isLimitExceeded) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: input.trim(),\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    // Reset input height to original\n    if (inputRef.current) {\n      inputRef.current.style.height = '48px';\n    }\n    setIsLoading(true);\n\n    try {\n      const response = await fetch('/api/ai/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          messages: [...messages, userMessage].map(msg => ({\n            role: msg.role,\n            content: msg.content\n          })),\n          systemPrompt: prompt,\n          sessionId: sessionId,\n          blogId: blogId,\n          courseId: courseId,\n          chapterTopicId: chapterTopicId,\n          isFirstMessage: isFirstMessage,\n          featureSlug: 'ai-chat'\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        \n        // Handle message limit exceeded\n        if (errorData.error === 'MESSAGE_LIMIT_EXCEEDED') {\n          setIsLimitExceeded(true);\n          setRemainingMessages(0);\n          const limitExceededMessage: Message = {\n            id: (Date.now() + 1).toString(),\n            role: 'assistant',\n            content: 'You have reached your message limit. Please upgrade to continue chatting.',\n            timestamp: new Date()\n          };\n          setMessages(prev => [...prev, limitExceededMessage]);\n          return;\n        }\n        \n        throw new Error('Failed to get AI response');\n      }\n\n      const data = await response.json();\n      \n      // Update session state if this was the first message\n      if (isFirstMessage && data.sessionId) {\n        setSessionId(data.sessionId);\n        setIsFirstMessage(false);\n      }\n      \n      const assistantMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: data.response,\n        timestamp: new Date()\n      };\n\n      setMessages(prev => [...prev, assistantMessage]);\n      \n      // Update remaining messages after successful message\n      if (remainingMessages !== null && remainingMessages > 0) {\n        setRemainingMessages(prev => prev !== null ? prev - 1 : null);\n      }\n    } catch (error) {\n      console.error('Error getting AI response:', error);\n      const errorMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: 'Sorry, I encountered an error. Please try again.',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n\n  const clearChat = () => {\n    setMessages([]);\n    setInput('');\n    setSessionId(null);\n    setIsFirstMessage(true);\n    setHasMoreMessages(true);\n    setIsUserScrolling(false);\n    setHasInitiallyLoaded(false);\n    setLastAIMessageId(null);\n  };\n\n  // Load chat history when chat opens\n  const loadChatHistory = async () => {\n    if (!isSignedIn || !isChatOpen || isLoadingHistory) return;\n\n    setIsLoadingHistory(true);\n    try {\n      const params = new URLSearchParams();\n      if (blogId) params.append('blogId', blogId);\n      if (courseId) params.append('courseId', courseId);\n      if (chapterTopicId) params.append('chapterTopicId', chapterTopicId);\n\n      // Use the main chat-sessions route instead of the last route\n      const response = await fetch(`/api/chat-sessions?${params}`);\n      if (response.ok) {\n        const data = await response.json();\n        if (data.success && data.sessions && data.sessions.length > 0) {\n          // Get the most recent session for this specific content\n          const latestSession = data.sessions[0];\n          setSessionId(latestSession.id);\n          setIsFirstMessage(false);\n          \n          // Convert database messages to component format\n          const historyMessages: Message[] = latestSession.messages.map((msg: any) => ({\n            id: msg.id,\n            role: msg.sender === 'USER' ? 'user' : 'assistant',\n            content: msg.message,\n            timestamp: new Date(msg.createdAt)\n          }));\n\n          setMessages(historyMessages);\n          setHasInitiallyLoaded(true);\n          \n          // Set the last AI message ID to prevent scroll behavior on initial load\n          if (historyMessages.length > 0) {\n            const lastMessage = historyMessages[historyMessages.length - 1];\n            if (lastMessage.role === 'assistant') {\n              setLastAIMessageId(lastMessage.id);\n            }\n          }\n          \n          // Scroll to bottom on initial load\n          setTimeout(() => scrollToBottom(), 50);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading chat history:', error);\n    } finally {\n      setIsLoadingHistory(false);\n    }\n  };\n\n  // Load older messages when scrolling to top\n  const loadOlderMessages = async () => {\n    if (!sessionId || isLoadingOlderMessages || !hasMoreMessages) return;\n\n    setIsLoadingOlderMessages(true);\n    try {\n      const params = new URLSearchParams({\n        sessionId,\n        limit: '20',\n        offset: messages.length.toString()\n      });\n\n      const response = await fetch(`/api/chat-history?${params}`);\n      if (response.ok) {\n        const data = await response.json();\n        if (data.success && data.messages.length > 0) {\n          // Convert database messages to component format\n          const olderMessages: Message[] = data.messages.map((msg: any) => ({\n            id: msg.id,\n            role: msg.sender === 'USER' ? 'user' : 'assistant',\n            content: msg.message,\n            timestamp: new Date(msg.createdAt)\n          }));\n\n          setMessages(prev => [...olderMessages, ...prev]);\n          setHasMoreMessages(data.hasMore);\n        } else {\n          setHasMoreMessages(false);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading older messages:', error);\n    } finally {\n      setIsLoadingOlderMessages(false);\n    }\n  };\n\n  // Handle scroll to top for loading older messages\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    \n    // Check if user is scrolling up (not at bottom)\n    const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10; // 10px tolerance\n    setIsUserScrolling(!isAtBottom);\n    \n    // Load older messages when scrolling to top\n    if (scrollTop === 0 && hasMoreMessages && !isLoadingOlderMessages) {\n      loadOlderMessages();\n    }\n  };\n\n  const handleBeginLearning = () => {\n    onChatToggle?.(true);\n    // Scroll to top of the page\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const handleCloseChat = () => {\n    onChatToggle?.(false);\n  };\n\n  // Show premium lock screen for non-logged-in users\n  if (!isSignedIn) {\n    return (\n      <div className={`bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl shadow-xl border-2 border-yellow-200 ${className}`}>\n        {/* Header */}\n        <div className=\"p-6\">\n          {/* Top row: Icon and Title */}\n          <div className=\"flex items-center gap-4\">\n            <div className=\"h-12 w-12 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center shadow-lg\">\n              <svg className=\"h-6 w-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-900\">AI Premium Learning</h3>\n          </div>\n          \n        </div>\n\n        {/* Premium Lock Content */}\n        <div className=\"border-t border-gray-200 p-6 text-center\">\n          <div className=\"mb-4\">\n            <div className=\"h-16 w-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 flex items-center justify-center\">\n              <svg className=\"h-8 w-8 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n              </svg>\n            </div>\n            <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">Unlock AI Premium Learning For</h4>\n            <h4 className=\"text-lg font-bold text-yellow-900 mb-2\">{blogTitle}</h4>\n            <p className=\"text-gray-600 text-sm mb-4\">\n              Get instant answers, explanations, and personalized learning assistance with our AI tutor.\n            </p>\n          </div>\n          \n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-center gap-2 text-sm text-gray-600\">\n              <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n              <span>Instant doubt resolution</span>\n            </div>\n            <div className=\"flex items-center justify-center gap-2 text-sm text-gray-600\">\n              <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n              <span>Personalized explanations</span>\n            </div>\n            <div className=\"flex items-center justify-center gap-2 text-sm text-gray-600\">\n              <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n              <span>24/7 learning support</span>\n            </div>\n          </div>\n\n          <a\n            href=\"/profile?tab=subscription\"\n            className=\"cursor-pointer mt-6 w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-semibold py-3 px-6 rounded-lg hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 flex items-center justify-center gap-2\"\n          >\n            <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\n            </svg>\n            Upgrade to AI Premium\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  // If chat is not open, show the \"Begin AI Learning\" button\n  if (!isChatOpen) {\n    return (\n      <div className={`bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl shadow-xl border-2 border-blue-200 ${className}`}>\n        <div className=\"p-6\">\n          {/* Header with logo and title in one line */}\n          <div className=\"flex items-center gap-4 mb-4\">\n            <div className=\"h-12 w-12 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center shadow-lg\">\n              <svg className=\"h-6 w-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-900\">AI Learning Assistant</h3>\n          </div>\n          \n          {/* Description */}\n          <p className=\"text-gray-600 text-sm mb-6\">\n            Get personalized help understanding \"{blogTitle}\" with our AI tutor.\n          </p>\n\n          <button \n            onClick={handleBeginLearning}\n            className=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center justify-center gap-2 mb-4 cursor-pointer\"\n          >\n            <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n            </svg>\n            Begin AI Learning\n          </button>\n          \n          {/* Features section with toggle */}\n          <div>\n            <button\n              onClick={() => setShowFeatures(!showFeatures)}\n              className=\"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1 mb-3 cursor-pointer\"\n            >\n              {showFeatures ? 'Show less' : 'What will it help with?'}\n              <svg \n                className={`h-4 w-4 transition-transform duration-200 ${showFeatures ? 'rotate-180' : ''}`}\n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n              >\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n              </svg>\n            </button>\n            \n            {showFeatures && (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                  <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span>Instant doubt resolution</span>\n                </div>\n                <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                  <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span>Personalized explanations</span>\n                </div>\n                <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                  <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span>24/7 learning support</span>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Chat interface when opened\n  return (\n    <div className={`bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl shadow-xl border-2 border-blue-200 flex flex-col ${className}`} style={{ height: '85vh' }}>\n      {/* Header */}\n      <div className=\"p-6\">\n        {/* Top row: Icon and Title */}\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"h-12 w-12 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center shadow-lg\">\n              <svg className=\"h-6 w-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-900\">AI Learning Assistant</h3>\n          </div>\n          <button\n            onClick={handleCloseChat}\n            className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100 cursor-pointer\"\n            title=\"Close chat\"\n          >\n            <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        \n        {/* Blog Title */}\n        <h2 className=\"text-lg font-semibold text-gray-700 mb-3\">{blogTitle}</h2>\n        \n        {/* Bottom row: Status and Actions */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex flex-col\">\n            <p className=\"text-sm text-gray-600\">\n              {messages.length > 0 ? `${messages.length} message${messages.length !== 1 ? 's' : ''}` : 'Ready to help with your learning'}\n            </p>\n            {/* Message limit display */}\n            {messageLimit !== null && (\n              <p className=\"text-xs text-gray-500 mt-1\">\n                {remainingMessages !== null ? (\n                  hasActivePlan ? (\n                    <span className=\"text-green-600\">\n                      {messageLimit === -1 ? 'Unlimited messages' : `${remainingMessages} of ${messageLimit} messages remaining`}\n                    </span>\n                  ) : remainingMessages > 0 ? (\n                    <span className=\"text-blue-600\">\n                      {remainingMessages} of {messageLimit} messages remaining\n                    </span>\n                  ) : (\n                    <span className=\"text-red-600\">Message limit reached</span>\n                  )\n                ) : (\n                  <span className=\"text-gray-500\">Loading limits...</span>\n                )}\n              </p>\n            )}\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"h-2 w-2 rounded-full bg-green-400 animate-pulse\"></div>\n              <span className=\"text-xs text-gray-500\">Active</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Chat Area */}\n      <div className=\"border-t border-gray-200 flex flex-col flex-1 min-h-0\">\n        {/* Messages */}\n        <div \n          ref={messagesContainerRef}\n          className=\"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 scroll-smooth\"\n          onScroll={handleScroll}\n        >\n          {/* Loading older messages indicator */}\n          {isLoadingOlderMessages && (\n            <div className=\"flex justify-center py-2\">\n              <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                <div className=\"h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin\"></div>\n                Loading older messages...\n              </div>\n            </div>\n          )}\n\n          {/* Loading history indicator */}\n          {isLoadingHistory && (\n            <div className=\"flex justify-center py-8\">\n              <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                <div className=\"h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin\"></div>\n                Loading chat history...\n              </div>\n            </div>\n          )}\n\n          {/* No more messages indicator */}\n          {!hasMoreMessages && messages.length > 0 && (\n            <div className=\"flex justify-center py-2\">\n              <div className=\"text-xs text-gray-400\">No more messages</div>\n            </div>\n          )}\n\n          {messages.length === 0 && !isLoadingHistory ? (\n            <div className=\"text-center py-8\">\n              <div className=\"h-12 w-12 mx-auto mb-4 rounded-full bg-gradient-to-r from-blue-100 to-blue-200 flex items-center justify-center\">\n                <svg className=\"h-6 w-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                </svg>\n              </div>\n              <p className=\"text-gray-500 text-sm\">Start a conversation with AI</p>\n            </div>\n          ) : (\n            <>\n              <div ref={messagesStartRef} />\n              {messages.map((message) => (\n              <div\n                key={message.id}\n                data-role={message.role}\n                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div\n                  className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                    message.role === 'user'\n                      ? 'bg-blue-600 text-white ml-8'\n                      : 'bg-gray-100 text-gray-900 mr-8'\n                  }`}\n                >\n                  <div className=\"text-sm prose prose-sm max-w-none\">\n                    {(() => {\n                      // Parse content and render code blocks with the CodeBlock component\n                      const parts = message.content.split(/(```[\\w]*\\n[\\s\\S]*?```)/g);\n                      return parts.map((part, index) => {\n                        if (part.startsWith('```')) {\n                          const match = part.match(/```(\\w+)?\\n([\\s\\S]*?)```/);\n                          if (match) {\n                            const language = match[1] || 'text';\n                            const code = match[2].trim();\n                            return <CodeBlock key={index} code={code} language={language} />;\n                          }\n                        }\n                        return (\n                          <div\n                            key={index}\n                            dangerouslySetInnerHTML={{\n                              __html: part\n                                .replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"font-semibold text-gray-900\">$1</strong>')\n                                .replace(/\\*(.*?)\\*/g, '<em class=\"italic text-gray-700\">$1</em>')\n                                .replace(/`([^`]+)`/g, '<code class=\"bg-gray-100 px-1 py-0.5 rounded text-sm font-mono text-gray-800\">$1</code>')\n                            }}\n                          />\n                        );\n                      });\n                    })()}\n                  </div>\n                  <p className={`text-xs mt-1 ${\n                    message.role === 'user' ? 'text-blue-100' : 'text-gray-500'\n                  }`}>\n                    {message.timestamp.toLocaleTimeString()}\n                  </p>\n                </div>\n              </div>\n              ))}\n            </>\n          )}\n          {isLoading && (\n            <div className=\"flex justify-start\">\n              <div className=\"bg-gray-100 text-gray-900 max-w-xs lg:max-w-md px-4 py-2 rounded-lg mr-8\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"flex space-x-1\">\n                    <div className=\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                    <div className=\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                    <div className=\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                  </div>\n                  <span className=\"text-sm text-gray-500\">AI is thinking...</span>\n                </div>\n              </div>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Input Area */}\n        <div className=\"border-t border-gray-200 p-4 mt-auto\">\n          {isLimitExceeded ? (\n            /* Limit Exceeded UI */\n            <div className=\"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-6 text-center\">\n              <div className=\"mb-4\">\n                <div className=\"h-16 w-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 flex items-center justify-center\">\n                  <svg className=\"h-8 w-8 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                  </svg>\n                </div>\n                <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">Message Limit Reached</h4>\n                <p className=\"text-gray-600 text-sm mb-4\">\n                  You've used all {messageLimit} free messages. Upgrade to continue chatting with unlimited AI support.\n                </p>\n              </div>\n              \n              <div className=\"space-y-3 mb-6\">\n                <div className=\"flex items-center justify-center gap-2 text-sm text-gray-600\">\n                  <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span>Unlimited AI conversations</span>\n                </div>\n                <div className=\"flex items-center justify-center gap-2 text-sm text-gray-600\">\n                  <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span>Priority AI responses</span>\n                </div>\n                <div className=\"flex items-center justify-center gap-2 text-sm text-gray-600\">\n                  <svg className=\"h-4 w-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span>Advanced AI features</span>\n                </div>\n              </div>\n\n              <a\n                href=\"/profile?tab=subscription\"\n                className=\"cursor-pointer w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-semibold py-3 px-6 rounded-lg hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 flex items-center justify-center gap-2\"\n              >\n                <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\n                </svg>\n                Upgrade to Premium\n              </a>\n            </div>\n          ) : (\n            /* Normal Input Form */\n            <form onSubmit={handleSubmit} className=\"flex gap-3\">\n              <div className=\"flex-1 relative\">\n                <textarea\n                  ref={inputRef}\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  onKeyPress={handleKeyPress}\n                  placeholder={placeholder}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200\"\n                  rows={1}\n                  style={{ minHeight: '48px', maxHeight: '120px' }}\n                  onInput={(e) => {\n                    const target = e.target as HTMLTextAreaElement;\n                    target.style.height = 'auto';\n                    target.style.height = `${Math.min(target.scrollHeight, 120)}px`;\n                  }}\n                  disabled={isLoading}\n                />\n              </div>\n              <button\n                type=\"submit\"\n                disabled={!input.trim() || isLoading}\n                className={`cursor-pointer px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 font-semibold shadow-lg hover:shadow-xl ${\n                  input.trim() ? 'hover:scale-105' : ''\n                }`}\n                style={{ \n                  minWidth: input.trim() ? 'auto' : '48px',\n                  width: input.trim() ? 'auto' : '48px',\n                  height: '48px'\n                }}\n              >\n                {isLoading ? (\n                  <div className=\"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                ) : (\n                  <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\n                  </svg>\n                )}\n              </button>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useUser } from '@clerk/nextjs';\n\ninterface QuizButtonProps {\n  blogId?: string;\n  chapterTopicId?: string;\n  courseId?: string;\n  blogSlug?: string;\n}\n\ninterface Assessment {\n  id: string;\n  status: string;\n  totalQuestions: number;\n  assessmentQuestions: Array<{\n    userAnswer: any;\n    isCorrect: boolean;\n  }>;\n}\n\ninterface AssessmentResult {\n  score: number;\n  percentage: number;\n  totalQuestions: number;\n}\n\nexport default function QuizButton({ \n  blogId, \n  chapterTopicId, \n  courseId, \n  blogSlug \n}: QuizButtonProps) {\n  const { isSignedIn, user } = useUser();\n  const [isHovered, setIsHovered] = useState(false);\n  const [assessment, setAssessment] = useState<Assessment | null>(null);\n  const [result, setResult] = useState<AssessmentResult | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (isSignedIn && (blogId || chapterTopicId || courseId || blogSlug)) {\n      fetchAssessmentData();\n    } else {\n      setLoading(false);\n    }\n  }, [isSignedIn, blogId, chapterTopicId, courseId, blogSlug]);\n\n  const fetchAssessmentData = async () => {\n    try {\n      setLoading(true);\n      const params = new URLSearchParams();\n      if (blogId) params.append('blogId', blogId);\n      if (chapterTopicId) params.append('chapterTopicId', chapterTopicId);\n      if (courseId) params.append('courseId', courseId);\n      if (blogSlug) params.append('blogSlug', blogSlug);\n\n      const response = await fetch(`/api/assessments?${params.toString()}`);\n      const data = await response.json();\n\n      if (data.success && data.data.length > 0) {\n        const latestAssessment = data.data[0];\n        setAssessment(latestAssessment);\n        \n        // If assessment is completed, calculate results\n        if (latestAssessment.status === 'COMPLETED') {\n          const correctAnswers = latestAssessment.assessmentQuestions.filter((aq: any) => aq.isCorrect).length;\n          const percentage = Math.round((correctAnswers / latestAssessment.totalQuestions) * 100);\n          setResult({\n            score: correctAnswers,\n            percentage,\n            totalQuestions: latestAssessment.totalQuestions\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching assessment data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getQuizUrl = () => {\n    if (assessment?.status === 'COMPLETED') {\n      return `/blogs/${blogSlug}/assessment/results`;\n    } else if (assessment?.status === 'ACTIVE') {\n      return `/blogs/${blogSlug}/assessment`;\n    } else {\n      return `/quiz?${new URLSearchParams({\n        ...(blogId && { blogId }),\n        ...(chapterTopicId && { chapterTopicId }),\n        ...(courseId && { courseId }),\n        ...(blogSlug && { slug: blogSlug })\n      }).toString()}`;\n    }\n  };\n\n  const getButtonText = () => {\n    if (assessment?.status === 'COMPLETED') {\n      return 'View Results';\n    } else if (assessment?.status === 'ACTIVE') {\n      return 'Resume Quiz';\n    } else {\n      return 'Start Quiz';\n    }\n  };\n\n  const getButtonDescription = () => {\n    if (assessment?.status === 'COMPLETED') {\n      return 'Review your quiz performance';\n    } else if (assessment?.status === 'ACTIVE') {\n      return 'Continue where you left off';\n    } else {\n      return 'Test your knowledge';\n    }\n  };\n\n  if (!isSignedIn) {\n    return (\n      <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl shadow-xl border-2 border-yellow-200 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg\">\n              <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n              </svg>\n            </div>\n            <div>\n              <h3 className=\"font-bold text-lg text-gray-900\">AI Quiz</h3>\n              <p className=\"text-sm text-gray-600\">Unlock personalized learning</p>\n            </div>\n          </div>\n          <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\n            <svg className=\"w-4 h-4 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n            </svg>\n          </div>\n        </div>\n\n        {/* Features Grid */}\n         <div className=\"grid grid-cols-2 gap-3 mb-4\">\n           <div className=\"flex items-center space-x-2\">\n             <div className=\"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center\">\n               <svg className=\"w-3 h-3 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n               </svg>\n             </div>\n             <span className=\"text-xs font-medium text-gray-700\">AI-Generated</span>\n           </div>\n           <div className=\"flex items-center space-x-2\">\n             <div className=\"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center\">\n               <svg className=\"w-3 h-3 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n               </svg>\n             </div>\n             <span className=\"text-xs font-medium text-gray-700\">Instant Feedback</span>\n           </div>\n           <div className=\"flex items-center space-x-2\">\n             <div className=\"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center\">\n               <svg className=\"w-3 h-3 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n               </svg>\n             </div>\n             <span className=\"text-xs font-medium text-gray-700\">Progress Track</span>\n           </div>\n           <div className=\"flex items-center space-x-2\">\n             <div className=\"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center\">\n               <svg className=\"w-3 h-3 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4\" />\n               </svg>\n             </div>\n             <span className=\"text-xs font-medium text-gray-700\">Customizable</span>\n           </div>\n         </div>\n\n        <Link\n          href=\"/sign-in\"\n          className=\"group block w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-center py-3 rounded-lg font-bold hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 relative overflow-hidden shadow-lg\"\n        >\n          <span className=\"relative z-10 flex items-center justify-center space-x-2\">\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n            </svg>\n            <span>Unlock AI Quizzes</span>\n          </span>\n          {/* Shimmer effect */}\n          <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out\"></div>\n        </Link>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl shadow-xl border-2 border-blue-200/60 p-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"w-10 h-10 bg-gray-300 rounded-full\"></div>\n            <div>\n              <div className=\"h-5 bg-gray-300 rounded w-24 mb-2\"></div>\n              <div className=\"h-4 bg-gray-300 rounded w-32\"></div>\n            </div>\n          </div>\n          <div className=\"h-12 bg-gray-300 rounded-lg\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl shadow-xl border-2 border-blue-200/60 p-6\">\n      <div className=\"flex items-center space-x-3 mb-4\">\n        <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg\">\n          <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n          </svg>\n        </div>\n        <div>\n          <h3 className=\"font-bold text-lg text-gray-900\">AI Quiz</h3>\n          <p className=\"text-sm text-gray-600\">{getButtonDescription()}</p>\n        </div>\n      </div>\n\n      {/* Show result summary if assessment is completed */}\n      {result && (\n        <div className=\"mb-4 p-3 bg-white/60 rounded-lg border border-blue-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\n                <svg className=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <span className=\"text-sm font-medium text-gray-700\">Completed</span>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-lg font-bold text-gray-900\">{result.percentage}%</div>\n              <div className=\"text-xs text-gray-500\">{result.score}/{result.totalQuestions} correct</div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex items-center space-x-4 text-xs text-gray-500 mb-4\">\n        <div className=\"flex items-center space-x-1\">\n          <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n          <span>AI-Generated</span>\n        </div>\n        <div className=\"flex items-center space-x-1\">\n          <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n          <span>Instant Feedback</span>\n        </div>\n      </div>\n\n      <Link\n        href={getQuizUrl()}\n        className=\"group block w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white text-center py-3 rounded-lg font-bold hover:from-blue-700 hover:to-blue-800 transition-all duration-300 relative overflow-hidden shadow-lg\"\n      >\n        <span className=\"relative z-10 flex items-center justify-center space-x-2\">\n          <span>{getButtonText()}</span>\n          <svg \n            className=\"w-4 h-4 group-hover:translate-x-1 transition-transform duration-200\" \n            fill=\"none\" \n            stroke=\"currentColor\" \n            viewBox=\"0 0 24 24\"\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n          </svg>\n        </span>\n        {/* Shimmer effect */}\n        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-out\"></div>\n      </Link>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}